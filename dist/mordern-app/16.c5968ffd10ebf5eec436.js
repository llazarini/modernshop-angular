(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"/gom":function(t,e,n){"use strict";n.r(e),n.d(e,"BannersModule",(function(){return nt}));var a=n("ofXK"),i=n("tyNb"),r=n("fXoL"),o=n("tk/3"),c=n("AytR");let s=(()=>{class t{constructor(t){this.httpClient=t}getAll(t){let e=new o.e;return t&&(e=e.append("page",t.toString())),this.httpClient.get(c.a.baseAuthUrl+"/banners/get-all",{params:e})}update(t){return this.httpClient.put(c.a.baseAuthUrl+"/banners/update/"+t.id,t)}store(t){return this.httpClient.post(c.a.baseAuthUrl+"/banners/store",t)}dataprovider(){return this.httpClient.get(c.a.baseAuthUrl+"/banners/dataprovider/",{})}get(t){return this.httpClient.get(c.a.baseAuthUrl+"/banners/get/"+t,{})}delete(t){return this.httpClient.delete(c.a.baseAuthUrl+"/banners/delete/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(o.b))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=n("kyzu"),b=n("XiUz"),d=n("bTqV"),u=n("+0xr"),m=n("Dh3D"),p=n("M9IT"),h=n("bv9b"),f=n("NFeN");function g(t,e){1&t&&r.Nb(0,"mat-progress-bar",18)}function v(t,e){1&t&&(r.Sb(0,"th",19),r.Dc(1,"#"),r.Rb())}function S(t,e){if(1&t&&(r.Sb(0,"td",20),r.Dc(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ec(t.id)}}function R(t,e){1&t&&(r.Sb(0,"th",21),r.Dc(1,"Nome"),r.Rb())}function B(t,e){if(1&t&&(r.Sb(0,"td",20),r.Dc(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ec(t.name)}}function k(t,e){1&t&&(r.Sb(0,"th",21),r.Dc(1,"Slug"),r.Rb())}function D(t,e){if(1&t&&(r.Sb(0,"td",20),r.Dc(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Ec(t.slug)}}function C(t,e){1&t&&(r.Sb(0,"th",22),r.Dc(1,"A\xe7\xf5es"),r.Rb())}function y(t,e){if(1&t){const t=r.Tb();r.Sb(0,"td",20),r.Sb(1,"button",23),r.Sb(2,"mat-icon",24),r.Dc(3,"edit"),r.Rb(),r.Dc(4," Editar "),r.Rb(),r.Sb(5,"button",25),r.ac("click",(function(){r.sc(t);const n=e.$implicit;return r.ec().deleteConfirm(n)})),r.Sb(6,"mat-icon",24),r.Dc(7,"remove_circle_outline"),r.Rb(),r.Dc(8," Remover "),r.Rb(),r.Rb()}if(2&t){const t=e.$implicit;r.Bb(1),r.kc("routerLink","edit/"+t.id)}}function w(t,e){1&t&&r.Nb(0,"tr",26)}function x(t,e){1&t&&r.Nb(0,"tr",27)}let A=(()=>{class t{constructor(t,e){this.bannerService=t,this.alertService=e,this.displayedColumns=["id","name","actions"],this.loading=!0,this.page=0}ngOnInit(){this.getAll()}getAll(){this.loading=!0,this.bannerService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading=!1)}delete(t){this.loading=!0,this.bannerService.delete(t.id).subscribe(t=>{this.getAll(),this.alertService.toast(t.message)}).add(()=>this.loading=!1)}pageChange(t){this.page=t.pageIndex,this.getAll()}deleteConfirm(t){this.alertService.confirm("Deseja remover o registro?","Remover").subscribe(e=>{e&&this.delete(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s),r.Mb(l.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-banners"]],decls:24,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["color","primary","mat-flat-button","","routerLink","add"],[1,"mdi","mdi-plus"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","sku"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"actions"],["mat-button","","color","primary",3,"routerLink"],["inline","",1,"small"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(r.Bc(0,g,1,0,"mat-progress-bar",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"h1",3),r.Dc(4,"Banners"),r.Rb(),r.Sb(5,"button",4),r.Nb(6,"i",5),r.Dc(7," Adicionar "),r.Rb(),r.Rb(),r.Sb(8,"table",6),r.Qb(9,7),r.Bc(10,v,2,0,"th",8),r.Bc(11,S,2,1,"td",9),r.Pb(),r.Qb(12,10),r.Bc(13,R,2,0,"th",11),r.Bc(14,B,2,1,"td",9),r.Pb(),r.Qb(15,12),r.Bc(16,k,2,0,"th",11),r.Bc(17,D,2,1,"td",9),r.Pb(),r.Qb(18,13),r.Bc(19,C,2,0,"th",14),r.Bc(20,y,9,1,"td",9),r.Pb(),r.Bc(21,w,1,0,"tr",15),r.Bc(22,x,1,0,"tr",16),r.Rb(),r.Sb(23,"mat-paginator",17),r.ac("page",(function(t){return e.pageChange(t)})),r.Rb(),r.Rb()),2&t&&(r.kc("ngIf",e.loading),r.Bb(8),r.kc("dataSource",e.dataSource),r.Bb(13),r.kc("matHeaderRowDef",e.displayedColumns),r.Bb(1),r.kc("matRowDefColumns",e.displayedColumns),r.Bb(1),r.kc("pageIndex",e.page)("length",e.total))},directives:[a.l,b.c,b.b,d.a,i.c,u.j,b.a,m.a,u.c,u.e,u.b,u.g,u.i,p.a,h.a,u.d,u.a,f.a,u.f,u.h],styles:[""]}),t})();var N=n("3Pt+"),I=n("sAQj"),G=n("kmnG"),L=n("qFsG"),M=n("KyJ7"),U=n("f0Cb");function E(t,e){1&t&&r.Nb(0,"mat-progress-bar",12)}function F(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",13),r.Sb(1,"mat-form-field",6),r.Sb(2,"mat-label"),r.Dc(3,"Nome"),r.Rb(),r.Nb(4,"input",7),r.Rb(),r.Sb(5,"mat-form-field",6),r.Sb(6,"mat-label"),r.Dc(7,"Conte\xfado"),r.Rb(),r.Nb(8,"textarea",14),r.Rb(),r.Sb(9,"app-file-upload",15),r.ac("uploaded",(function(n){r.sc(t);const a=e.index;return r.ec().fileUploaded(a,n)})),r.Rb(),r.Sb(10,"button",16),r.ac("click",(function(){r.sc(t);const n=e.index;return r.ec().removeBanner(n)})),r.Nb(11,"i",17),r.Dc(12," Remover banner"),r.Rb(),r.Nb(13,"mat-divider"),r.Rb()}if(2&t){const t=e.$implicit,n=e.index,a=r.ec();r.kc("formGroup",a.banners.controls[n]),r.Bb(9),r.kc("id",t.value.id)("token",a.token)("multiple",!1)}}let j=(()=>{class t{constructor(t=null,e,n,a,i){this.formBuilder=t,this.router=e,this.activatedRoute=n,this.alertService=a,this.bannerService=i,this.id=null,this.token=I.a.generate(),this.formGroup=this.formBuilder.group({request_token:[this.token],id:[null],name:[null,[N.v.required,N.v.maxLength(255)]],slug:[null],banners:this.formBuilder.array([])})}get banners(){return this.formGroup.get("banners")}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.id&&this.get()}submit(){this.loading||(this.id?this.update():this.store())}store(){this.loading=!0,this.bannerService.store(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}update(){this.loading=!0,this.bannerService.update(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}get(){this.loading=!0,this.bannerService.get(this.id).subscribe(t=>{this.formGroup.patchValue(t),t.banners.forEach(t=>this.addBanner(t))}).add(()=>this.loading=!1)}addBanner(t){var e;this.banners.push(this.formBuilder.group({id:[null==t?void 0:t.id],file_id:[null===(e=null==t?void 0:t.file)||void 0===e?void 0:e.id],name:[null==t?void 0:t.name,[N.v.required,N.v.maxLength(255)]],content:[null==t?void 0:t.content]}))}fileUploaded(t,e){this.banners.at(t).patchValue({file_id:e.id})}removeBanner(t){this.banners.removeAt(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(N.e),r.Mb(i.b),r.Mb(i.a),r.Mb(l.a),r.Mb(s))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-add-edit"]],decls:21,vars:5,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start"],["color","primary","mat-flat-button","",3,"click"],[1,"mdi","mdi-plus"],[1,"common-form","padding",3,"formGroup","submit"],["fxLayout","column",1,"common-form-max"],["appearance","outline"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","slug"],["mat-button","","type","button",3,"click"],["fxFlex",""],["class","padding","fxLayout","column",3,"formGroup",4,"ngFor","ngForOf"],["mode","indeterminate",1,"progress"],["fxLayout","column",1,"padding",3,"formGroup"],["matInput","","required","","formControlName","content"],["type","App\\Models\\Banner",3,"id","token","multiple","uploaded"],["mat-icon-button","","type","button",3,"click"],[1,"mdi","mdi-trash-can"]],template:function(t,e){1&t&&(r.Bc(0,E,1,0,"mat-progress-bar",0),r.Sb(1,"div",1),r.Sb(2,"h1"),r.Dc(3),r.Rb(),r.Sb(4,"button",2),r.ac("click",(function(){return e.submit()})),r.Nb(5,"i",3),r.Dc(6),r.Rb(),r.Rb(),r.Sb(7,"form",4),r.ac("submit",(function(){return e.submit()})),r.Sb(8,"div",5),r.Sb(9,"mat-form-field",6),r.Sb(10,"mat-label"),r.Dc(11,"Nome do Banner"),r.Rb(),r.Nb(12,"input",7),r.Rb(),r.Sb(13,"mat-form-field",6),r.Sb(14,"mat-label"),r.Dc(15,"Slug (inser\xe7\xe3o no c\xf3digo)"),r.Rb(),r.Nb(16,"input",8),r.Rb(),r.Sb(17,"button",9),r.ac("click",(function(){return e.addBanner()})),r.Dc(18,"Adicionar Banner"),r.Rb(),r.Sb(19,"div",10),r.Bc(20,F,14,4,"div",11),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.kc("ngIf",e.loading),r.Bb(3),r.Fc("",e.id?"Editar":"Adicionar"," Banner"),r.Bb(3),r.Fc(" ",e.id?"Salvar edi\xe7\xe3o":"Adicionar"," "),r.Bb(1),r.kc("formGroup",e.formGroup),r.Bb(13),r.kc("ngForOf",e.banners.controls))},directives:[a.l,b.c,b.b,d.a,N.w,N.p,N.j,G.c,G.f,L.b,N.c,N.u,N.o,N.h,b.a,a.k,h.a,M.a,U.a],styles:[".list[_ngcontent-%COMP%]{min-width:220px}"]}),t})();const q=[{path:"",component:A},{path:"add",component:j},{path:"edit/:id",component:j}];let H=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(q)],i.e]}),t})();var P=n("7EHt"),J=n("TU8p"),O=n("Xa2L"),Q=n("Wp6s"),$=n("1jcm"),_=n("MutI"),K=n("wZkO"),T=n("FKr1"),W=n("d3UM"),X=n("Xx9n"),z=n("g1/W"),V=n("tmjD"),Z=n("Qu3c"),Y=n("/1cH"),tt=n("WJ5W"),et=n("zg7/");let nt=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[a.c,H,b.f,P.a,J.b,h.b,O.b,Q.c,d.b,N.t,L.c,f.b,$.a,_.b,K.d,T.o,W.b,u.k,m.b,X.a,z.a,p.b,V.b,Z.b,Y.a,tt.b,et.ProductsModule,N.k]]}),t})()}}]);