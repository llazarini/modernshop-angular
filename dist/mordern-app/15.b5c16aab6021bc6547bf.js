(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"/gom":function(t,e,a){"use strict";a.r(e),a.d(e,"BannersModule",(function(){return et}));var n=a("ofXK"),r=a("tyNb"),i=a("fXoL"),o=a("tk/3"),c=a("AytR");let s=(()=>{class t{constructor(t){this.httpClient=t}getAll(t){let e=new o.e;return t&&(e=e.append("page",t.toString())),this.httpClient.get(c.a.baseAuthUrl+"/banners/get-all",{params:e})}update(t){return this.httpClient.put(c.a.baseAuthUrl+"/banners/update/"+t.id,t)}store(t){return this.httpClient.post(c.a.baseAuthUrl+"/banners/store",t)}dataprovider(){return this.httpClient.get(c.a.baseAuthUrl+"/banners/dataprovider/",{})}get(t){return this.httpClient.get(c.a.baseAuthUrl+"/banners/get/"+t,{})}delete(t){return this.httpClient.delete(c.a.baseAuthUrl+"/banners/delete/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(o.b))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=a("kyzu"),b=a("XiUz"),d=a("bTqV"),u=a("+0xr"),m=a("Dh3D"),p=a("M9IT"),h=a("bv9b"),f=a("NFeN");function g(t,e){1&t&&i.Nb(0,"mat-progress-bar",18)}function S(t,e){1&t&&(i.Sb(0,"th",19),i.Dc(1,"#"),i.Rb())}function v(t,e){if(1&t&&(i.Sb(0,"td",20),i.Dc(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Ec(t.id)}}function R(t,e){1&t&&(i.Sb(0,"th",21),i.Dc(1,"Nome"),i.Rb())}function B(t,e){if(1&t&&(i.Sb(0,"td",20),i.Dc(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Ec(t.name)}}function D(t,e){1&t&&(i.Sb(0,"th",21),i.Dc(1,"Slug"),i.Rb())}function k(t,e){if(1&t&&(i.Sb(0,"td",20),i.Dc(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Ec(t.slug)}}function y(t,e){1&t&&(i.Sb(0,"th",22),i.Dc(1,"A\xe7\xf5es"),i.Rb())}function w(t,e){if(1&t){const t=i.Tb();i.Sb(0,"td",20),i.Sb(1,"button",23),i.Sb(2,"mat-icon",24),i.Dc(3,"edit"),i.Rb(),i.Dc(4," Editar "),i.Rb(),i.Sb(5,"button",25),i.ac("click",(function(){i.sc(t);const a=e.$implicit;return i.ec().deleteConfirm(a)})),i.Sb(6,"mat-icon",24),i.Dc(7,"remove_circle_outline"),i.Rb(),i.Dc(8," Remover "),i.Rb(),i.Rb()}if(2&t){const t=e.$implicit;i.Bb(1),i.kc("routerLink","edit/"+t.id)}}function x(t,e){1&t&&i.Nb(0,"tr",26)}function C(t,e){1&t&&i.Nb(0,"tr",27)}let A=(()=>{class t{constructor(t,e){this.bannerService=t,this.alertService=e,this.displayedColumns=["id","name","actions"],this.loading=!0,this.page=0}ngOnInit(){this.getAll()}getAll(){this.loading=!0,this.bannerService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading=!1)}delete(t){this.loading=!0,this.bannerService.delete(t.id).subscribe(t=>{this.getAll(),this.alertService.toast(t.message)}).add(()=>this.loading=!1)}pageChange(t){this.page=t.pageIndex,this.getAll()}deleteConfirm(t){this.alertService.confirm("Deseja remover o registro?","Remover").subscribe(e=>{e&&this.delete(t)})}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(s),i.Mb(l.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-banners"]],decls:24,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["color","primary","mat-flat-button","","routerLink","add"],[1,"mdi","mdi-plus"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","sku"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"actions"],["mat-button","","color","primary",3,"routerLink"],["inline","",1,"small"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(i.Bc(0,g,1,0,"mat-progress-bar",0),i.Sb(1,"div",1),i.Sb(2,"div",2),i.Sb(3,"h1",3),i.Dc(4,"Banners"),i.Rb(),i.Sb(5,"button",4),i.Nb(6,"i",5),i.Dc(7," Adicionar "),i.Rb(),i.Rb(),i.Sb(8,"table",6),i.Qb(9,7),i.Bc(10,S,2,0,"th",8),i.Bc(11,v,2,1,"td",9),i.Pb(),i.Qb(12,10),i.Bc(13,R,2,0,"th",11),i.Bc(14,B,2,1,"td",9),i.Pb(),i.Qb(15,12),i.Bc(16,D,2,0,"th",11),i.Bc(17,k,2,1,"td",9),i.Pb(),i.Qb(18,13),i.Bc(19,y,2,0,"th",14),i.Bc(20,w,9,1,"td",9),i.Pb(),i.Bc(21,x,1,0,"tr",15),i.Bc(22,C,1,0,"tr",16),i.Rb(),i.Sb(23,"mat-paginator",17),i.ac("page",(function(t){return e.pageChange(t)})),i.Rb(),i.Rb()),2&t&&(i.kc("ngIf",e.loading),i.Bb(8),i.kc("dataSource",e.dataSource),i.Bb(13),i.kc("matHeaderRowDef",e.displayedColumns),i.Bb(1),i.kc("matRowDefColumns",e.displayedColumns),i.Bb(1),i.kc("pageIndex",e.page)("length",e.total))},directives:[n.l,b.c,b.b,d.a,r.c,u.j,b.a,m.a,u.c,u.e,u.b,u.g,u.i,p.a,h.a,u.d,u.a,f.a,u.f,u.h],styles:[""]}),t})();var N=a("3Pt+"),L=a("sAQj"),I=a("kmnG"),G=a("qFsG"),M=a("KyJ7");function F(t,e){1&t&&i.Nb(0,"mat-progress-bar",12)}function U(t,e){if(1&t){const t=i.Tb();i.Sb(0,"div",13),i.Sb(1,"app-file-upload",14),i.ac("uploaded",(function(a){i.sc(t);const n=e.index;return i.ec().fileUploaded(n,a)})),i.Rb(),i.Sb(2,"div",15),i.Sb(3,"mat-form-field",6),i.Sb(4,"mat-label"),i.Dc(5,"Nome"),i.Rb(),i.Nb(6,"input",7),i.Rb(),i.Sb(7,"mat-form-field",6),i.Sb(8,"mat-label"),i.Dc(9,"Conte\xfado"),i.Rb(),i.Nb(10,"textarea",16),i.Rb(),i.Rb(),i.Sb(11,"button",17),i.ac("click",(function(){i.sc(t);const a=e.index;return i.ec().removeBanner(a)})),i.Nb(12,"i",18),i.Rb(),i.Rb()}if(2&t){const t=e.$implicit,a=e.index,n=i.ec();i.kc("formGroup",n.banners.controls[a]),i.Bb(1),i.kc("id",t.value.id)("token",n.token)("multiple",!1)}}let E=(()=>{class t{constructor(t=null,e,a,n,r){this.formBuilder=t,this.router=e,this.activatedRoute=a,this.alertService=n,this.bannerService=r,this.id=null,this.token=L.a.generate(),this.formGroup=this.formBuilder.group({id:[null],name:[null,[N.v.required,N.v.maxLength(255)]],slug:[null],banners:this.formBuilder.array([])})}get banners(){return this.formGroup.get("banners")}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.id&&this.get()}submit(){this.loading||(this.id?this.update():this.store())}store(){this.loading=!0,this.bannerService.store(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}update(){this.loading=!0,this.bannerService.update(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}get(){this.loading=!0,this.bannerService.get(this.id).subscribe(t=>{this.formGroup.patchValue(t),t.banners.forEach(t=>this.addBanner(t))}).add(()=>this.loading=!1)}addBanner(t){var e;this.banners.push(this.formBuilder.group({id:[null==t?void 0:t.id],file_id:[null===(e=null==t?void 0:t.file)||void 0===e?void 0:e.id],name:[null==t?void 0:t.name,[N.v.required,N.v.maxLength(255)]],content:[null==t?void 0:t.content]}))}fileUploaded(t,e){this.banners.at(t).patchValue({file_id:e.id})}removeBanner(t){this.banners.removeAt(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(N.e),i.Mb(r.b),i.Mb(r.a),i.Mb(l.a),i.Mb(s))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-add-edit"]],decls:21,vars:5,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start"],["color","primary","mat-flat-button","",3,"click"],[1,"mdi","mdi-plus"],[1,"common-form","padding",3,"formGroup","submit"],["fxLayout","column",1,"common-form-max"],["appearance","outline"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","slug"],["mat-button","","type","button",3,"click"],["fxFlex",""],["fxLayout","row","fxLayoutAlign","start center",3,"formGroup",4,"ngFor","ngForOf"],["mode","indeterminate",1,"progress"],["fxLayout","row","fxLayoutAlign","start center",3,"formGroup"],["type","App\\Models\\Banner",3,"id","token","multiple","uploaded"],["fxLayout","column","fxFlex","",1,"margin-left"],["matInput","","required","","formControlName","content"],["mat-icon-button","","type","button",3,"click"],[1,"mdi","mdi-trash-can"]],template:function(t,e){1&t&&(i.Bc(0,F,1,0,"mat-progress-bar",0),i.Sb(1,"div",1),i.Sb(2,"h1"),i.Dc(3),i.Rb(),i.Sb(4,"button",2),i.ac("click",(function(){return e.submit()})),i.Nb(5,"i",3),i.Dc(6),i.Rb(),i.Rb(),i.Sb(7,"form",4),i.ac("submit",(function(){return e.submit()})),i.Sb(8,"div",5),i.Sb(9,"mat-form-field",6),i.Sb(10,"mat-label"),i.Dc(11,"Nome do Banner"),i.Rb(),i.Nb(12,"input",7),i.Rb(),i.Sb(13,"mat-form-field",6),i.Sb(14,"mat-label"),i.Dc(15,"Slug (inser\xe7\xe3o no c\xf3digo)"),i.Rb(),i.Nb(16,"input",8),i.Rb(),i.Sb(17,"button",9),i.ac("click",(function(){return e.addBanner()})),i.Dc(18,"Adicionar Banner"),i.Rb(),i.Sb(19,"div",10),i.Bc(20,U,13,4,"div",11),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.kc("ngIf",e.loading),i.Bb(3),i.Fc("",e.id?"Editar":"Adicionar"," Banner"),i.Bb(3),i.Fc(" ",e.id?"Salvar edi\xe7\xe3o":"Adicionar"," "),i.Bb(1),i.kc("formGroup",e.formGroup),i.Bb(13),i.kc("ngForOf",e.banners.controls))},directives:[n.l,b.c,b.b,d.a,N.w,N.p,N.j,I.c,I.f,G.b,N.c,N.u,N.o,N.h,b.a,n.k,h.a,M.a],styles:[".list[_ngcontent-%COMP%]{min-width:220px}"]}),t})();const j=[{path:"",component:A},{path:"add",component:E},{path:"edit/:id",component:E}];let q=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[r.e.forChild(j)],r.e]}),t})();var H=a("7EHt"),P=a("TU8p"),J=a("Xa2L"),O=a("Wp6s"),Q=a("1jcm"),$=a("MutI"),K=a("wZkO"),T=a("FKr1"),W=a("d3UM"),X=a("Xx9n"),_=a("g1/W"),z=a("tmjD"),V=a("Qu3c"),Z=a("/1cH"),Y=a("WJ5W"),tt=a("zg7/");let et=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[n.c,q,b.f,H.a,P.b,h.b,J.b,O.c,d.b,N.t,G.c,f.b,Q.a,$.b,K.d,T.o,W.b,u.k,m.b,X.a,_.a,p.b,z.b,V.b,Z.a,Y.b,tt.ProductsModule,N.k]]}),t})()}}]);