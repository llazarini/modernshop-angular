(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"/gom":function(t,e,n){"use strict";n.r(e),n.d(e,"BannersModule",(function(){return nt}));var a=n("ofXK"),r=n("tyNb"),i=n("fXoL"),o=n("tk/3"),c=n("AytR");let s=(()=>{class t{constructor(t){this.httpClient=t}getAll(t){let e=new o.e;return t&&(e=e.append("page",t.toString())),this.httpClient.get(c.a.baseAuthUrl+"/banners/get-all",{params:e})}update(t){return this.httpClient.put(c.a.baseAuthUrl+"/banners/update/"+t.id,t)}store(t){return this.httpClient.post(c.a.baseAuthUrl+"/banners/store",t)}dataprovider(){return this.httpClient.get(c.a.baseAuthUrl+"/banners/dataprovider/",{})}get(t){return this.httpClient.get(c.a.baseAuthUrl+"/banners/get/"+t,{})}delete(t){return this.httpClient.delete(c.a.baseAuthUrl+"/banners/delete/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(o.b))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=n("kyzu"),b=n("XiUz"),d=n("bTqV"),u=n("+0xr"),m=n("Dh3D"),p=n("M9IT"),h=n("bv9b"),f=n("NFeN");function g(t,e){1&t&&i.Nb(0,"mat-progress-bar",18)}function v(t,e){1&t&&(i.Sb(0,"th",19),i.Cc(1,"#"),i.Rb())}function S(t,e){if(1&t&&(i.Sb(0,"td",20),i.Cc(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Dc(t.id)}}function C(t,e){1&t&&(i.Sb(0,"th",21),i.Cc(1,"Nome"),i.Rb())}function R(t,e){if(1&t&&(i.Sb(0,"td",20),i.Cc(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Dc(t.name)}}function A(t,e){1&t&&(i.Sb(0,"th",21),i.Cc(1,"Slug"),i.Rb())}function y(t,e){if(1&t&&(i.Sb(0,"td",20),i.Cc(1),i.Rb()),2&t){const t=e.$implicit;i.Bb(1),i.Dc(t.slug)}}function w(t,e){1&t&&(i.Sb(0,"th",22),i.Cc(1,"A\xe7\xf5es"),i.Rb())}function k(t,e){if(1&t){const t=i.Tb();i.Sb(0,"td",20),i.Sb(1,"button",23),i.Sb(2,"mat-icon",24),i.Cc(3,"edit"),i.Rb(),i.Cc(4," Editar "),i.Rb(),i.Sb(5,"button",25),i.ac("click",(function(){i.rc(t);const n=e.$implicit;return i.ec().deleteConfirm(n)})),i.Sb(6,"mat-icon",24),i.Cc(7,"remove_circle_outline"),i.Rb(),i.Cc(8," Remover "),i.Rb(),i.Rb()}if(2&t){const t=e.$implicit;i.Bb(1),i.jc("routerLink","edit/"+t.id)}}function B(t,e){1&t&&i.Nb(0,"tr",26)}function x(t,e){1&t&&i.Nb(0,"tr",27)}let D=(()=>{class t{constructor(t,e){this.bannerService=t,this.alertService=e,this.displayedColumns=["id","name","actions"],this.loading=!0,this.page=0}ngOnInit(){this.getAll()}getAll(){this.loading=!0,this.bannerService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading=!1)}delete(t){this.loading=!0,this.bannerService.delete(t.id).subscribe(t=>{this.getAll(),this.alertService.toast(t.message)}).add(()=>this.loading=!1)}pageChange(t){this.page=t.pageIndex,this.getAll()}deleteConfirm(t){this.alertService.confirm("Deseja remover o registro?","Remover").subscribe(e=>{e&&this.delete(t)})}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(s),i.Mb(l.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-banners"]],decls:24,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["color","primary","mat-flat-button","","routerLink","add"],[1,"mdi","mdi-plus"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","sku"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"actions"],["mat-button","","color","primary",3,"routerLink"],["inline","",1,"small"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(i.Ac(0,g,1,0,"mat-progress-bar",0),i.Sb(1,"div",1),i.Sb(2,"div",2),i.Sb(3,"h1",3),i.Cc(4,"Banners"),i.Rb(),i.Sb(5,"button",4),i.Nb(6,"i",5),i.Cc(7," Adicionar "),i.Rb(),i.Rb(),i.Sb(8,"table",6),i.Qb(9,7),i.Ac(10,v,2,0,"th",8),i.Ac(11,S,2,1,"td",9),i.Pb(),i.Qb(12,10),i.Ac(13,C,2,0,"th",11),i.Ac(14,R,2,1,"td",9),i.Pb(),i.Qb(15,12),i.Ac(16,A,2,0,"th",11),i.Ac(17,y,2,1,"td",9),i.Pb(),i.Qb(18,13),i.Ac(19,w,2,0,"th",14),i.Ac(20,k,9,1,"td",9),i.Pb(),i.Ac(21,B,1,0,"tr",15),i.Ac(22,x,1,0,"tr",16),i.Rb(),i.Sb(23,"mat-paginator",17),i.ac("page",(function(t){return e.pageChange(t)})),i.Rb(),i.Rb()),2&t&&(i.jc("ngIf",e.loading),i.Bb(8),i.jc("dataSource",e.dataSource),i.Bb(13),i.jc("matHeaderRowDef",e.displayedColumns),i.Bb(1),i.jc("matRowDefColumns",e.displayedColumns),i.Bb(1),i.jc("pageIndex",e.page)("length",e.total))},directives:[a.l,b.c,b.b,d.b,r.c,u.j,b.a,m.a,u.c,u.e,u.b,u.g,u.i,p.a,h.a,u.d,u.a,f.a,u.f,u.h],styles:[""]}),t})();var N=n("3Pt+"),j=n("sAQj"),I=n("kmnG"),G=n("qFsG"),L=n("KyJ7"),M=n("f0Cb");function U(t,e){1&t&&i.Nb(0,"mat-progress-bar",12)}function E(t,e){if(1&t){const t=i.Tb();i.Sb(0,"div",13),i.Sb(1,"mat-form-field",6),i.Sb(2,"mat-label"),i.Cc(3,"Nome"),i.Rb(),i.Nb(4,"input",7),i.Rb(),i.Sb(5,"mat-form-field",6),i.Sb(6,"mat-label"),i.Cc(7,"Conte\xfado"),i.Rb(),i.Nb(8,"textarea",14),i.Rb(),i.Sb(9,"app-file-upload",15),i.ac("uploaded",(function(n){i.rc(t);const a=e.index;return i.ec().fileUploaded(a,n)})),i.Rb(),i.Sb(10,"button",16),i.ac("click",(function(){i.rc(t);const n=e.index;return i.ec().removeBanner(n)})),i.Nb(11,"i",17),i.Cc(12," Remover banner"),i.Rb(),i.Nb(13,"mat-divider"),i.Rb()}if(2&t){const t=e.$implicit,n=e.index,a=i.ec();i.jc("formGroup",a.banners.controls[n]),i.Bb(9),i.jc("id",t.value.id)("token",a.token)("multiple",!1)}}let q=(()=>{class t{constructor(t=null,e,n,a,r){this.formBuilder=t,this.router=e,this.activatedRoute=n,this.alertService=a,this.bannerService=r,this.id=null,this.token=j.a.generate(),this.formGroup=this.formBuilder.group({request_token:[this.token],id:[null],name:[null,[N.v.required,N.v.maxLength(255)]],slug:[null],banners:this.formBuilder.array([])})}get banners(){return this.formGroup.get("banners")}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.id&&this.get()}submit(){this.loading||(this.id?this.update():this.store())}store(){this.loading=!0,this.bannerService.store(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}update(){this.loading=!0,this.bannerService.update(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}get(){this.loading=!0,this.bannerService.get(this.id).subscribe(t=>{this.formGroup.patchValue(t),t.banners.forEach(t=>this.addBanner(t))}).add(()=>this.loading=!1)}addBanner(t){var e;this.banners.push(this.formBuilder.group({id:[null==t?void 0:t.id],file_id:[null===(e=null==t?void 0:t.file)||void 0===e?void 0:e.id],name:[null==t?void 0:t.name,[N.v.required,N.v.maxLength(255)]],content:[null==t?void 0:t.content]}))}fileUploaded(t,e){this.banners.at(t).patchValue({file_id:e.id})}removeBanner(t){this.banners.removeAt(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(N.e),i.Mb(r.b),i.Mb(r.a),i.Mb(l.a),i.Mb(s))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-add-edit"]],decls:21,vars:5,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start"],["color","primary","mat-flat-button","",3,"click"],[1,"mdi","mdi-plus"],[1,"common-form","padding",3,"formGroup","submit"],["fxLayout","column",1,"common-form-max"],["appearance","outline"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","slug"],["mat-button","","type","button",3,"click"],["fxFlex",""],["class","padding","fxLayout","column",3,"formGroup",4,"ngFor","ngForOf"],["mode","indeterminate",1,"progress"],["fxLayout","column",1,"padding",3,"formGroup"],["matInput","","required","","formControlName","content"],["type","App\\Models\\Banner",3,"id","token","multiple","uploaded"],["mat-icon-button","","type","button",3,"click"],[1,"mdi","mdi-trash-can"]],template:function(t,e){1&t&&(i.Ac(0,U,1,0,"mat-progress-bar",0),i.Sb(1,"div",1),i.Sb(2,"h1"),i.Cc(3),i.Rb(),i.Sb(4,"button",2),i.ac("click",(function(){return e.submit()})),i.Nb(5,"i",3),i.Cc(6),i.Rb(),i.Rb(),i.Sb(7,"form",4),i.ac("submit",(function(){return e.submit()})),i.Sb(8,"div",5),i.Sb(9,"mat-form-field",6),i.Sb(10,"mat-label"),i.Cc(11,"Nome do Banner"),i.Rb(),i.Nb(12,"input",7),i.Rb(),i.Sb(13,"mat-form-field",6),i.Sb(14,"mat-label"),i.Cc(15,"Slug (inser\xe7\xe3o no c\xf3digo)"),i.Rb(),i.Nb(16,"input",8),i.Rb(),i.Sb(17,"button",9),i.ac("click",(function(){return e.addBanner()})),i.Cc(18,"Adicionar Banner"),i.Rb(),i.Sb(19,"div",10),i.Ac(20,E,14,4,"div",11),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.jc("ngIf",e.loading),i.Bb(3),i.Ec("",e.id?"Editar":"Adicionar"," Banner"),i.Bb(3),i.Ec(" ",e.id?"Salvar edi\xe7\xe3o":"Adicionar"," "),i.Bb(1),i.jc("formGroup",e.formGroup),i.Bb(13),i.jc("ngForOf",e.banners.controls))},directives:[a.l,b.c,b.b,d.b,N.w,N.p,N.j,I.c,I.f,G.b,N.c,N.u,N.o,N.h,b.a,a.k,h.a,L.a,M.a],styles:[".list[_ngcontent-%COMP%]{min-width:220px}"]}),t})();const F=[{path:"",component:D},{path:"add",component:q},{path:"edit/:id",component:q}];let H=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[r.e.forChild(F)],r.e]}),t})();var P=n("7EHt"),J=n("TU8p"),O=n("Xa2L"),Q=n("Wp6s"),$=n("1jcm"),_=n("MutI"),K=n("wZkO"),T=n("FKr1"),W=n("d3UM"),X=n("Xx9n"),z=n("g1/W"),V=n("tmjD"),Z=n("Qu3c"),Y=n("/1cH"),tt=n("WJ5W"),et=n("zg7/");let nt=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[a.c,H,b.f,P.a,J.b,h.b,O.b,Q.c,d.c,N.t,G.c,f.b,$.a,_.b,K.d,T.o,W.b,u.k,m.b,X.a,z.a,p.b,V.b,Z.b,Y.a,tt.b,et.ProductsModule,N.k]]}),t})()}}]);