(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{W7Fq:function(t,a,e){"use strict";e.r(a),e.d(a,"OrdersModule",(function(){return bt}));var n=e("ofXK"),c=e("tyNb"),i=e("0IaG"),o=e("fXoL"),s=e("XiUz"),l=e("bTqV"),r=e("kmnG"),u=e("qFsG"),b=e("3Pt+");function m(t,a){if(1&t){const t=o.Tb();o.Sb(0,"mat-form-field"),o.Sb(1,"mat-label"),o.Dc(2,"C\xf3digo de rastreio"),o.Rb(),o.Sb(3,"input",8),o.ac("ngModelChange",(function(a){return o.sc(t),o.ec().trackingCode=a})),o.Rb(),o.Rb()}if(2&t){const t=o.ec();o.Bb(3),o.kc("ngModel",t.trackingCode)}}let d=(()=>{class t{constructor(t,a){this.dialogRef=t,this.data=a}confirm(){this.dialogRef.close({update:!0,trackingCode:this.trackingCode})}}return t.\u0275fac=function(a){return new(a||t)(o.Mb(i.g),o.Mb(i.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-status-update"]],decls:14,vars:3,consts:[["mat-dialog-title","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],[1,"mdi","mdi-close"],["fxLayout","column"],[4,"ngIf"],["fxLayoutAlign","end center",1,"margin-top"],["mat-stroked-button","","color","primary","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["matInput","",3,"ngModel","ngModelChange"]],template:function(t,a){1&t&&(o.Sb(0,"div",0),o.Sb(1,"strong"),o.Dc(2),o.Rb(),o.Sb(3,"button",1),o.Nb(4,"i",2),o.Rb(),o.Rb(),o.Sb(5,"mat-dialog-content",3),o.Sb(6,"div"),o.Dc(7),o.Rb(),o.Bc(8,m,4,1,"mat-form-field",4),o.Rb(),o.Sb(9,"mat-dialog-actions",5),o.Sb(10,"button",6),o.Dc(11,"Cancelar"),o.Rb(),o.Sb(12,"button",7),o.ac("click",(function(){return a.confirm()})),o.Dc(13,"Atualizar Status"),o.Rb(),o.Rb()),2&t&&(o.Bb(2),o.Fc("Atualizar status para ",a.data.status,""),o.Bb(5),o.Fc("Deseja mesmo atualizar para o status de ",a.data.status,""),o.Bb(1),o.kc("ngIf","sent"==a.data.status))},directives:[i.h,s.b,l.b,i.d,i.e,s.c,n.l,i.c,r.c,r.f,u.b,b.c,b.o,b.r],styles:[""]}),t})();var p=e("U3tn"),f=e("kyzu"),g=e("+0xr"),h=e("Dh3D"),S=e("M9IT"),y=e("bv9b"),D=e("STbY"),B=e("CQ0i");function R(t,a){1&t&&o.Nb(0,"mat-progress-bar",19)}function k(t,a){1&t&&(o.Sb(0,"th",20),o.Dc(1,"#"),o.Rb())}function C(t,a){if(1&t&&(o.Sb(0,"td",21),o.Dc(1),o.Rb()),2&t){const t=a.$implicit;o.Bb(1),o.Ec(t.id)}}function v(t,a){1&t&&(o.Sb(0,"th",22),o.Dc(1,"Frete"),o.Rb())}function w(t,a){if(1&t&&(o.Sb(0,"td",21),o.Dc(1),o.fc(2,"price"),o.Rb()),2&t){const t=a.$implicit;o.Bb(1),o.Gc("",t.shipment_option," ",o.gc(2,2,t.shipment),"")}}function _(t,a){1&t&&(o.Sb(0,"th",22),o.Dc(1,"Detalhes"),o.Rb())}function I(t,a){if(1&t&&(o.Sb(0,"small",27),o.Dc(1),o.Rb()),2&t){const t=a.$implicit;o.Bb(1),o.Ec(null==t||null==t.option?null:t.option.name)}}function x(t,a){if(1&t&&(o.Sb(0,"div",1),o.Sb(1,"div"),o.Dc(2),o.Rb(),o.Bc(3,I,2,1,"small",24),o.Sb(4,"small",25),o.Sb(5,"div"),o.Dc(6),o.fc(7,"price"),o.Rb(),o.Sb(8,"div",26),o.Dc(9),o.Rb(),o.Rb(),o.Rb()),2&t){const t=a.$implicit;o.Bb(2),o.Ec(null==t.product?null:t.product.name),o.Bb(1),o.kc("ngForOf",null==t?null:t.order_product_options),o.Bb(3),o.Ec(o.gc(7,4,t.price)),o.Bb(3),o.Fc("",t.quantity," x itens")}}function F(t,a){if(1&t&&(o.Sb(0,"td",21),o.Bc(1,x,10,6,"div",23),o.Rb()),2&t){const t=a.$implicit;o.Bb(1),o.kc("ngForOf",t.order_products)}}function M(t,a){1&t&&(o.Sb(0,"th",22),o.Dc(1,"Tipo de Pagamento"),o.Rb())}function $(t,a){if(1&t&&(o.Sb(0,"td",21),o.Dc(1),o.Rb()),2&t){const t=a.$implicit;o.Bb(1),o.Ec(null==t.payment_type?null:t.payment_type.name)}}function A(t,a){1&t&&(o.Sb(0,"th",22),o.Dc(1,"Status de pagamento"),o.Rb())}function P(t,a){if(1&t&&(o.Sb(0,"td",21),o.Dc(1),o.Rb()),2&t){const t=a.$implicit;o.Bb(1),o.Ec(null==t.payment_status?null:t.payment_status.name)}}function T(t,a){1&t&&(o.Sb(0,"th",22),o.Dc(1,"Total"),o.Rb())}function N(t,a){if(1&t&&(o.Sb(0,"td",21),o.Dc(1),o.fc(2,"price"),o.Rb()),2&t){const t=a.$implicit;o.Bb(1),o.Ec(o.gc(2,1,t.amount))}}function E(t,a){1&t&&(o.Sb(0,"th",28),o.Dc(1,"A\xe7\xf5es"),o.Rb())}function Q(t,a){if(1&t){const t=o.Tb();o.Sb(0,"button",34),o.ac("click",(function(){o.sc(t);const a=o.ec(2).$implicit;return o.ec().updateStatus(a,"paid")})),o.Nb(1,"i",35),o.Dc(2," Informar Pagamento "),o.Rb()}}function L(t,a){if(1&t){const t=o.Tb();o.Sb(0,"button",34),o.ac("click",(function(){o.sc(t);const a=o.ec(2).$implicit;return o.ec().updateStatus(a,"cancel")})),o.Nb(1,"i",36),o.Dc(2," Cancelar Pedido "),o.Rb()}}function z(t,a){if(1&t){const t=o.Tb();o.Sb(0,"button",34),o.ac("click",(function(){o.sc(t);const a=o.ec(2).$implicit;return o.ec().updateStatus(a,"refunded")})),o.Nb(1,"i",37),o.Dc(2," Estornar "),o.Rb()}}function G(t,a){if(1&t){const t=o.Tb();o.Sb(0,"button",34),o.ac("click",(function(){o.sc(t);const a=o.ec(2).$implicit;return o.ec().updateStatus(a,"sent")})),o.Nb(1,"i",38),o.Dc(2," Informar envio "),o.Rb()}}function H(t,a){if(1&t&&(o.Qb(0),o.Sb(1,"button",30),o.Nb(2,"i",31),o.Dc(3," Atualizar Status "),o.Rb(),o.Sb(4,"mat-menu",null,32),o.Bc(6,Q,3,0,"button",33),o.Bc(7,L,3,0,"button",33),o.Bc(8,z,3,0,"button",33),o.Bc(9,G,3,0,"button",33),o.Rb(),o.Pb()),2&t){const t=o.pc(5),a=o.ec().$implicit;o.Bb(1),o.kc("matMenuTriggerFor",t),o.Bb(5),o.kc("ngIf","waiting_payment"===(null==a.payment_status?null:a.payment_status.slug)),o.Bb(1),o.kc("ngIf","waiting_payment"===(null==a.payment_status?null:a.payment_status.slug)),o.Bb(1),o.kc("ngIf","paid"===(null==a.payment_status?null:a.payment_status.slug)),o.Bb(1),o.kc("ngIf","paid"===(null==a.payment_status?null:a.payment_status.slug))}}function O(t,a){if(1&t&&(o.Sb(0,"td",21),o.Bc(1,H,10,5,"ng-container",29),o.Rb()),2&t){const t=a.$implicit,e=o.ec();o.Bb(1),o.kc("ngIf",e.haveSomeStatus(null==t.payment_status?null:t.payment_status.slug))}}function W(t,a){1&t&&o.Nb(0,"tr",39)}function j(t,a){1&t&&o.Nb(0,"tr",40)}const J=[{path:"",component:(()=>{class t{constructor(t,a,e){this.orderService=t,this.alertService=a,this.matDialog=e,this.displayedColumns=["id","payment_type","shipment","details","amount","payment_type","payment_status","actions"],this.loading=0,this.page=0}ngOnInit(){this.getAll(),this.dataprovider()}getAll(t){t&&(this.dataSource=[]),this.loading+=1,this.orderService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading-=1)}dataprovider(){this.loading+=1,this.orderService.dataprovider().subscribe(t=>{this.paymentStatuses=t.payment_statuses,console.log(t)}).add(()=>this.loading-=1)}pageChange(t){this.page=t.pageIndex,this.getAll()}updateStatus(t,a){return this.matDialog.open(d,{minWidth:"300px",maxWidth:"700px",data:{status:a}}).afterClosed().subscribe(e=>{e&&e.update&&this.changeStatus(t,a,e.trackingCode)})}changeStatus(t,a,e){this.loading+=1,this.orderService.changeStatus(t.id,a,e).subscribe(t=>{this.getAll(!0),this.alertService.toast(t.message)}).add(()=>this.loading-=1)}haveSomeStatus(t){return"waiting_payment"===t||"paid"===t}}return t.\u0275fac=function(a){return new(a||t)(o.Mb(p.a),o.Mb(f.a),o.Mb(i.b))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-orders"]],decls:30,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","shipment"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","details"],["matColumnDef","payment_type"],["matColumnDef","payment_status"],["matColumnDef","amount"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["fxLayout","column",4,"ngFor","ngForOf"],["class","muted",4,"ngFor","ngForOf"],["fxLayout","row"],[1,"margin-left"],[1,"muted"],["mat-header-cell","",1,"actions"],[4,"ngIf"],["mat-stroked-button","","color","primary",3,"matMenuTriggerFor"],[1,"mdi","mdi-arrow-split-vertical"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"mdi","mdi-check"],[1,"mdi","mdi-close"],[1,"mdi","mdi-arrow-left"],[1,"mdi","mdi-truck"],["mat-header-row",""],["mat-row",""]],template:function(t,a){1&t&&(o.Bc(0,R,1,0,"mat-progress-bar",0),o.Sb(1,"div",1),o.Sb(2,"div",2),o.Sb(3,"h1",3),o.Dc(4,"Pedidos"),o.Rb(),o.Rb(),o.Sb(5,"table",4),o.Qb(6,5),o.Bc(7,k,2,0,"th",6),o.Bc(8,C,2,1,"td",7),o.Pb(),o.Qb(9,8),o.Bc(10,v,2,0,"th",9),o.Bc(11,w,3,4,"td",7),o.Pb(),o.Qb(12,10),o.Bc(13,_,2,0,"th",9),o.Bc(14,F,2,1,"td",7),o.Pb(),o.Qb(15,11),o.Bc(16,M,2,0,"th",9),o.Bc(17,$,2,1,"td",7),o.Pb(),o.Qb(18,12),o.Bc(19,A,2,0,"th",9),o.Bc(20,P,2,1,"td",7),o.Pb(),o.Qb(21,13),o.Bc(22,T,2,0,"th",9),o.Bc(23,N,3,3,"td",7),o.Pb(),o.Qb(24,14),o.Bc(25,E,2,0,"th",15),o.Bc(26,O,2,1,"td",7),o.Pb(),o.Bc(27,W,1,0,"tr",16),o.Bc(28,j,1,0,"tr",17),o.Rb(),o.Sb(29,"mat-paginator",18),o.ac("page",(function(t){return a.pageChange(t)})),o.Rb(),o.Rb()),2&t&&(o.kc("ngIf",a.loading>0),o.Bb(5),o.kc("dataSource",a.dataSource),o.Bb(22),o.kc("matHeaderRowDef",a.displayedColumns),o.Bb(1),o.kc("matRowDefColumns",a.displayedColumns),o.Bb(1),o.kc("pageIndex",a.page)("length",a.total))},directives:[n.l,s.c,s.b,g.j,s.a,h.a,g.c,g.e,g.b,g.g,g.i,S.a,y.a,g.d,g.a,n.k,l.b,D.c,D.d,D.a,g.f,g.h],pipes:[B.a],styles:[""]}),t})()}];let X=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(a){return new(a||t)},imports:[[c.e.forChild(J)],c.e]}),t})();var q=e("7EHt"),K=e("TU8p"),U=e("Xa2L"),V=e("Wp6s"),Y=e("NFeN"),Z=e("1jcm"),tt=e("MutI"),at=e("wZkO"),et=e("FKr1"),nt=e("d3UM"),ct=e("Xx9n"),it=e("g1/W"),ot=e("tmjD"),st=e("Qu3c"),lt=e("/1cH"),rt=e("WJ5W"),ut=e("hyGo");let bt=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(a){return new(a||t)},imports:[[n.c,X,s.f,q.a,K.b,y.b,U.b,V.c,l.c,b.t,u.c,Y.b,Z.a,tt.b,at.d,et.o,nt.b,g.k,h.b,ct.a,it.a,S.b,ot.b,st.b,lt.a,rt.b,ut.a,b.k,i.f,D.b]]}),t})()}}]);