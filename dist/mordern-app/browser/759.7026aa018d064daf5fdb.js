(self.webpackChunkmodernshop_app=self.webpackChunkmodernshop_app||[]).push([[759],{7809:(t,e,i)=>{"use strict";i.d(e,{v:()=>o});class o{static generate(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}},4912:(t,e,i)=>{"use strict";i.d(e,{r:()=>o});let o=(()=>{class t{}return t.product="App\\Models\\Product",t.category="App\\Models\\Category",t.option="App\\Models\\Option",t})()},5759:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DiscountsModule:()=>st});var o=i(1511),r=i(3722),a=i(5001),n=i(1050),s=i(5994),u=i(7806),c=i(7439),l=i(5980),d=i(6073),m=i(6756),p=i(3691),g=i(7521),h=i(5250),f=i(5109),Z=i(1522),v=i(4786),A=i(7033),b=i(8623),q=i(7898),x=i(689),C=i(3005),U=i(3920),y=i(6828),T=i(84),_=i(5619),N=i(3548),w=i(1572),S=i(9063),k=i(529);let D=(()=>{class t{constructor(t){this.httpClient=t}getAll(t){let e=new S.LE;return t&&(e=e.append("page",t.toString())),this.httpClient.get(k.N.baseAuthUrl+"/discounts/get-all",{params:e})}update(t){return this.httpClient.put(k.N.baseAuthUrl+"/discounts/update/"+t.id,t)}store(t){return this.httpClient.post(k.N.baseAuthUrl+"/discounts/store",t)}dataprovider(){return this.httpClient.get(k.N.baseAuthUrl+"/discounts/dataprovider/",{})}get(t){return this.httpClient.get(k.N.baseAuthUrl+"/discounts/get/"+t,{})}delete(t){return this.httpClient.delete(k.N.baseAuthUrl+"/discounts/delete/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(w.LFG(S.eN))},t.\u0275prov=w.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Y=i(8394),J=i(8509);function Q(t,e){1&t&&w._UZ(0,"mat-progress-bar",19)}function I(t,e){1&t&&(w.TgZ(0,"th",20),w._uU(1,"#"),w.qZA())}function B(t,e){if(1&t&&(w.TgZ(0,"td",21),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Oqu(t.id)}}function L(t,e){1&t&&(w.TgZ(0,"th",22),w._uU(1,"Nome"),w.qZA())}function G(t,e){if(1&t&&(w.TgZ(0,"td",21),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Oqu(t.name)}}function O(t,e){1&t&&(w.TgZ(0,"th",22),w._uU(1,"C\xf3digo"),w.qZA())}function H(t,e){if(1&t&&(w.TgZ(0,"td",21),w._uU(1),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Oqu(t.code)}}function M(t,e){1&t&&(w.TgZ(0,"th",22),w._uU(1,"Valor"),w.qZA())}function R(t,e){if(1&t&&(w.TgZ(0,"td",21),w._uU(1),w.ALo(2,"price"),w.qZA()),2&t){const t=e.$implicit;w.xp6(1),w.Oqu(w.lcZ(2,1,t.value))}}function E(t,e){1&t&&(w.TgZ(0,"th",23),w._uU(1,"A\xe7\xf5es"),w.qZA())}function W(t,e){if(1&t){const t=w.EpF();w.TgZ(0,"td",21),w.TgZ(1,"button",24),w.TgZ(2,"mat-icon",25),w._uU(3,"edit"),w.qZA(),w._uU(4," Editar "),w.qZA(),w.TgZ(5,"button",26),w.NdJ("click",function(){const e=w.CHM(t).$implicit;return w.oxw().deleteConfirm(e)}),w.TgZ(6,"mat-icon",25),w._uU(7,"remove_circle_outline"),w.qZA(),w._uU(8," Remover "),w.qZA(),w.qZA()}if(2&t){const t=e.$implicit;w.xp6(1),w.Q6J("routerLink","edit/"+t.id)}}function j(t,e){1&t&&w._UZ(0,"tr",27)}function z(t,e){1&t&&w._UZ(0,"tr",28)}let $=(()=>{class t{constructor(t,e){this.discountService=t,this.alertService=e,this.displayedColumns=["id","name","code","value","actions"],this.loading=!0,this.page=0}ngOnInit(){this.getAll()}getAll(){this.loading=!0,this.discountService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading=!1)}delete(t){this.loading=!0,this.discountService.delete(t.id).subscribe(t=>{this.getAll(),this.alertService.toast(t.message)}).add(()=>this.loading=!1)}pageChange(t){this.page=t.pageIndex,this.getAll()}deleteConfirm(t){this.alertService.confirm("Deseja remover o registro?","Remover").subscribe(e=>{e&&this.delete(t)})}}return t.\u0275fac=function(e){return new(e||t)(w.Y36(D),w.Y36(Y.c))},t.\u0275cmp=w.Xpm({type:t,selectors:[["app-discounts"]],decls:27,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["color","primary","mat-flat-button","","routerLink","add"],[1,"mdi","mdi-plus"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","code"],["matColumnDef","value"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"actions"],["mat-button","","color","primary",3,"routerLink"],["inline","",1,"small"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(w.YNc(0,Q,1,0,"mat-progress-bar",0),w.TgZ(1,"div",1),w.TgZ(2,"div",2),w.TgZ(3,"h1",3),w._uU(4,"Cupons de Desconto"),w.qZA(),w.TgZ(5,"button",4),w._UZ(6,"i",5),w._uU(7," Adicionar "),w.qZA(),w.qZA(),w.TgZ(8,"table",6),w.ynx(9,7),w.YNc(10,I,2,0,"th",8),w.YNc(11,B,2,1,"td",9),w.BQk(),w.ynx(12,10),w.YNc(13,L,2,0,"th",11),w.YNc(14,G,2,1,"td",9),w.BQk(),w.ynx(15,12),w.YNc(16,O,2,0,"th",11),w.YNc(17,H,2,1,"td",9),w.BQk(),w.ynx(18,13),w.YNc(19,M,2,0,"th",11),w.YNc(20,R,3,3,"td",9),w.BQk(),w.ynx(21,14),w.YNc(22,E,2,0,"th",15),w.YNc(23,W,9,1,"td",9),w.BQk(),w.YNc(24,j,1,0,"tr",16),w.YNc(25,z,1,0,"tr",17),w.qZA(),w.TgZ(26,"mat-paginator",18),w.NdJ("page",function(t){return e.pageChange(t)}),w.qZA(),w.qZA()),2&t&&(w.Q6J("ngIf",e.loading),w.xp6(8),w.Q6J("dataSource",e.dataSource),w.xp6(16),w.Q6J("matHeaderRowDef",e.displayedColumns),w.xp6(1),w.Q6J("matRowDefColumns",e.displayedColumns),w.xp6(1),w.Q6J("pageIndex",e.page)("length",e.total))},directives:[o.O5,r.xw,r.Wh,l.lW,N.rH,A.BZ,r.yH,b.YE,A.w1,A.fO,A.Dz,A.as,A.nj,C.NW,s.pW,A.ge,A.ev,p.Hw,A.XQ,A.Gk],pipes:[J.d],styles:[""]}),t})();var F=i(7809),X=i(4912),P=i(6283),V=i(388);function K(t,e){1&t&&w._UZ(0,"mat-progress-bar",14)}const tt=function(){return{prefix:"R$ ",thousands:".",decimal:","}};function et(t,e){1&t&&(w.ynx(0),w._UZ(1,"input",15),w.BQk()),2&t&&(w.xp6(1),w.Q6J("options",w.DdM(1,tt)))}function it(t,e){1&t&&(w.ynx(0),w._UZ(1,"input",16),w.BQk())}let ot=(()=>{class t{constructor(t=null,e,i,o,r){this.formBuilder=t,this.router=e,this.activatedRoute=i,this.alertService=o,this.discountService=r,this.id=null,this.token=F.v.generate(),this.fileType=X.r.category,this.formGroup=this.formBuilder.group({request_token:[this.token],id:[null],name:[null,[d.kI.required,d.kI.maxLength(255)]],code:[null],type:["percentage"],value:[null]})}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.id&&this.get(),this.dataprovider()}dataprovider(){this.loading=!0,this.discountService.dataprovider().subscribe(t=>{}).add(()=>this.loading=!1)}submit(){this.loading||(this.id?this.update():this.store())}store(){this.loading=!0,this.discountService.store(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","discounts"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}update(){this.loading=!0,this.discountService.update(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","discounts"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}get(){this.loading=!0,this.discountService.get(this.id).subscribe(t=>{this.formGroup.patchValue(t)}).add(()=>this.loading=!1)}}return t.\u0275fac=function(e){return new(e||t)(w.Y36(d.qu),w.Y36(N.F0),w.Y36(N.gz),w.Y36(Y.c),w.Y36(D))},t.\u0275cmp=w.Xpm({type:t,selectors:[["app-add-edit"]],decls:30,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start"],["color","primary","mat-flat-button","",3,"click"],[1,"mdi","mdi-plus"],[1,"common-form","padding",3,"formGroup","submit"],["fxLayout","column",1,"common-form-max"],["appearance","outline"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","code"],["formControlName","type"],["value","percentage"],["value","value"],["fxFlex","","appearance","outline"],[4,"ngIf"],["mode","indeterminate",1,"progress"],["currencyMask","","matInput","","required","","formControlName","value",3,"options"],["type","number","matInput","","required","","formControlName","value"]],template:function(t,e){1&t&&(w.YNc(0,K,1,0,"mat-progress-bar",0),w.TgZ(1,"div",1),w.TgZ(2,"h1"),w._uU(3),w.qZA(),w.TgZ(4,"button",2),w.NdJ("click",function(){return e.submit()}),w._UZ(5,"i",3),w._uU(6),w.qZA(),w.qZA(),w.TgZ(7,"form",4),w.NdJ("submit",function(){return e.submit()}),w.TgZ(8,"div",5),w.TgZ(9,"mat-form-field",6),w.TgZ(10,"mat-label"),w._uU(11,"Nome do Desconto"),w.qZA(),w._UZ(12,"input",7),w.qZA(),w.TgZ(13,"mat-form-field",6),w.TgZ(14,"mat-label"),w._uU(15,"C\xf3digo"),w.qZA(),w._UZ(16,"input",8),w.qZA(),w.TgZ(17,"mat-form-field",6),w.TgZ(18,"mat-label"),w._uU(19,"Tipo"),w.qZA(),w.TgZ(20,"mat-select",9),w.TgZ(21,"mat-option",10),w._uU(22,"Porcentagem"),w.qZA(),w.TgZ(23,"mat-option",11),w._uU(24,"Valor"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(25,"mat-form-field",12),w.TgZ(26,"mat-label"),w._uU(27,"Desconto"),w.qZA(),w.YNc(28,et,2,2,"ng-container",13),w.YNc(29,it,2,0,"ng-container",13),w.qZA(),w.qZA(),w.qZA()),2&t&&(w.Q6J("ngIf",e.loading),w.xp6(3),w.hij("",e.id?"Editar":"Adicionar"," Desconto"),w.xp6(3),w.hij(" ",e.id?"Salvar edi\xe7\xe3o":"Adicionar"," "),w.xp6(1),w.Q6J("formGroup",e.formGroup),w.xp6(21),w.Q6J("ngIf","value"===e.formGroup.value.type),w.xp6(1),w.Q6J("ngIf","percentage"===e.formGroup.value.type))},directives:[o.O5,r.xw,r.Wh,l.lW,d._Y,d.JL,d.sg,P.KE,P.hX,m.Nt,d.Fj,d.Q7,d.JJ,d.u,v.gD,Z.ey,r.yH,s.pW,V.g1,d.wV],styles:[".list[_ngcontent-%COMP%]{min-width:220px}"]}),t})();const rt=[{path:"",component:$},{path:"add",component:ot},{path:"edit/:id",component:ot}];let at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=w.oAB({type:t}),t.\u0275inj=w.cJS({imports:[[N.Bz.forChild(rt)],N.Bz]}),t})();var nt=i(1575);let st=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=w.oAB({type:t}),t.\u0275inj=w.cJS({imports:[[o.ez,at,r.ae,a.To,n.g,s.Cv,u.Cq,c.QW,l.ot,d.UX,m.c,p.Ps,g.rP,h.ie,f.Nh,Z.Ng,v.LD,A.p0,b.JX,q.f,x.w,C.TU,U.yI,y.AV,T.Bb,_.Co,V.Ud,nt.n]]}),t})()}}]);