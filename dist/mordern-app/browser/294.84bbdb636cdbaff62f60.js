(self.webpackChunkmodernshop_app=self.webpackChunkmodernshop_app||[]).push([[294],{9294:(t,e,n)=>{"use strict";n.r(e),n.d(e,{OrdersModule:()=>dt});var a=n(1511),i=n(3548),o=n(4608),u=n(1572),s=n(3722),c=n(5980),l=n(6283),r=n(6756),d=n(6073);function m(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"mat-form-field"),u.TgZ(1,"mat-label"),u._uU(2,"C\xf3digo de rastreio"),u.qZA(),u.TgZ(3,"input",8),u.NdJ("ngModelChange",function(e){return u.CHM(t),u.oxw().trackingCode=e}),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.xp6(3),u.Q6J("ngModel",t.trackingCode)}}let p=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}confirm(){this.dialogRef.close({update:!0,trackingCode:this.trackingCode})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(o.so),u.Y36(o.WI))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-status-update"]],decls:14,vars:3,consts:[["mat-dialog-title","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],[1,"mdi","mdi-close"],["fxLayout","column"],[4,"ngIf"],["fxLayoutAlign","end center",1,"margin-top"],["mat-stroked-button","","color","primary","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["matInput","",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"strong"),u._uU(2),u.qZA(),u.TgZ(3,"button",1),u._UZ(4,"i",2),u.qZA(),u.qZA(),u.TgZ(5,"mat-dialog-content",3),u.TgZ(6,"div"),u._uU(7),u.qZA(),u.YNc(8,m,4,1,"mat-form-field",4),u.qZA(),u.TgZ(9,"mat-dialog-actions",5),u.TgZ(10,"button",6),u._uU(11,"Cancelar"),u.qZA(),u.TgZ(12,"button",7),u.NdJ("click",function(){return e.confirm()}),u._uU(13,"Atualizar Status"),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.hij("Atualizar status para ",e.data.status,""),u.xp6(5),u.hij("Deseja mesmo atualizar para o status de ",e.data.status,""),u.xp6(1),u.Q6J("ngIf","sent"==e.data.status))},directives:[o.uh,s.Wh,c.lW,o.ZT,o.xY,s.xw,a.O5,o.H8,l.KE,l.hX,r.Nt,d.Fj,d.JJ,d.On],styles:[""]}),t})();var g=n(5821),f=n(8394),Z=n(7033),h=n(8623),x=n(3005),_=n(5994),A=n(8055),y=n(8509);function q(t,e){1&t&&u._UZ(0,"mat-progress-bar",19)}function T(t,e){1&t&&(u.TgZ(0,"th",20),u._uU(1,"#"),u.qZA())}function w(t,e){if(1&t&&(u.TgZ(0,"td",21),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Oqu(t.id)}}function C(t,e){1&t&&(u.TgZ(0,"th",22),u._uU(1,"Frete"),u.qZA())}function U(t,e){if(1&t&&(u.TgZ(0,"td",21),u._uU(1),u.ALo(2,"price"),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.AsE("",t.shipment_option," ",u.lcZ(2,2,t.shipment),"")}}function N(t,e){1&t&&(u.TgZ(0,"th",22),u._uU(1,"Detalhes"),u.qZA())}function b(t,e){if(1&t&&(u.TgZ(0,"small",27),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Oqu(null==t||null==t.option?null:t.option.name)}}function S(t,e){if(1&t&&(u.TgZ(0,"div",1),u.TgZ(1,"div"),u._uU(2),u.qZA(),u.YNc(3,b,2,1,"small",24),u.TgZ(4,"small",25),u.TgZ(5,"div"),u._uU(6),u.ALo(7,"price"),u.qZA(),u.TgZ(8,"div",26),u._uU(9),u.qZA(),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(2),u.Oqu(null==t.product?null:t.product.name),u.xp6(1),u.Q6J("ngForOf",null==t?null:t.order_product_options),u.xp6(3),u.Oqu(u.lcZ(7,4,t.price)),u.xp6(3),u.hij("",t.quantity," x itens")}}function v(t,e){if(1&t&&(u.TgZ(0,"td",21),u.YNc(1,S,10,6,"div",23),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Q6J("ngForOf",t.order_products)}}function Y(t,e){1&t&&(u.TgZ(0,"th",22),u._uU(1,"Tipo de Pagamento"),u.qZA())}function k(t,e){if(1&t&&(u.TgZ(0,"td",21),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Oqu(null==t.payment_type?null:t.payment_type.name)}}function J(t,e){1&t&&(u.TgZ(0,"th",22),u._uU(1,"Status de pagamento"),u.qZA())}function Q(t,e){if(1&t&&(u.TgZ(0,"td",21),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Oqu(null==t.payment_status?null:t.payment_status.name)}}function D(t,e){1&t&&(u.TgZ(0,"th",22),u._uU(1,"Total"),u.qZA())}function I(t,e){if(1&t&&(u.TgZ(0,"td",21),u._uU(1),u.ALo(2,"price"),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Oqu(u.lcZ(2,1,t.amount))}}function O(t,e){1&t&&(u.TgZ(0,"th",28),u._uU(1,"A\xe7\xf5es"),u.qZA())}function F(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",34),u.NdJ("click",function(){u.CHM(t);const e=u.oxw(2).$implicit;return u.oxw().updateStatus(e,"paid")}),u._UZ(1,"i",35),u._uU(2," Informar Pagamento "),u.qZA()}}function B(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",34),u.NdJ("click",function(){u.CHM(t);const e=u.oxw(2).$implicit;return u.oxw().updateStatus(e,"cancel")}),u._UZ(1,"i",36),u._uU(2," Cancelar Pedido "),u.qZA()}}function M(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",34),u.NdJ("click",function(){u.CHM(t);const e=u.oxw(2).$implicit;return u.oxw().updateStatus(e,"refunded")}),u._UZ(1,"i",37),u._uU(2," Estornar "),u.qZA()}}function $(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",34),u.NdJ("click",function(){u.CHM(t);const e=u.oxw(2).$implicit;return u.oxw().updateStatus(e,"sent")}),u._UZ(1,"i",38),u._uU(2," Informar envio "),u.qZA()}}function H(t,e){if(1&t&&(u.ynx(0),u.TgZ(1,"button",30),u._UZ(2,"i",31),u._uU(3," Atualizar Status "),u.qZA(),u.TgZ(4,"mat-menu",null,32),u.YNc(6,F,3,0,"button",33),u.YNc(7,B,3,0,"button",33),u.YNc(8,M,3,0,"button",33),u.YNc(9,$,3,0,"button",33),u.qZA(),u.BQk()),2&t){const t=u.MAs(5),e=u.oxw().$implicit;u.xp6(1),u.Q6J("matMenuTriggerFor",t),u.xp6(5),u.Q6J("ngIf","waiting_payment"===(null==e.payment_status?null:e.payment_status.slug)),u.xp6(1),u.Q6J("ngIf","waiting_payment"===(null==e.payment_status?null:e.payment_status.slug)),u.xp6(1),u.Q6J("ngIf","paid"===(null==e.payment_status?null:e.payment_status.slug)),u.xp6(1),u.Q6J("ngIf","paid"===(null==e.payment_status?null:e.payment_status.slug))}}function L(t,e){if(1&t&&(u.TgZ(0,"td",21),u.YNc(1,H,10,5,"ng-container",29),u.qZA()),2&t){const t=e.$implicit,n=u.oxw();u.xp6(1),u.Q6J("ngIf",n.haveSomeStatus(null==t.payment_status?null:t.payment_status.slug))}}function E(t,e){1&t&&u._UZ(0,"tr",39)}function W(t,e){1&t&&u._UZ(0,"tr",40)}const z=[{path:"",component:(()=>{class t{constructor(t,e,n){this.orderService=t,this.alertService=e,this.matDialog=n,this.displayedColumns=["id","payment_type","shipment","details","amount","payment_type","payment_status","actions"],this.loading=0,this.page=0}ngOnInit(){this.getAll(),this.dataprovider()}getAll(t){t&&(this.dataSource=[]),this.loading+=1,this.orderService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading-=1)}dataprovider(){this.loading+=1,this.orderService.dataprovider().subscribe(t=>{this.paymentStatuses=t.payment_statuses,console.log(t)}).add(()=>this.loading-=1)}pageChange(t){this.page=t.pageIndex,this.getAll()}updateStatus(t,e){return this.matDialog.open(p,{minWidth:"300px",maxWidth:"700px",data:{status:e}}).afterClosed().subscribe(n=>{n&&n.update&&this.changeStatus(t,e,n.trackingCode)})}changeStatus(t,e,n){this.loading+=1,this.orderService.changeStatus(t.id,e,n).subscribe(t=>{this.getAll(!0),this.alertService.toast(t.message)}).add(()=>this.loading-=1)}haveSomeStatus(t){return"waiting_payment"===t||"paid"===t}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(g.p),u.Y36(f.c),u.Y36(o.uw))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-orders"]],decls:30,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","shipment"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","details"],["matColumnDef","payment_type"],["matColumnDef","payment_status"],["matColumnDef","amount"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["fxLayout","column",4,"ngFor","ngForOf"],["class","muted",4,"ngFor","ngForOf"],["fxLayout","row"],[1,"margin-left"],[1,"muted"],["mat-header-cell","",1,"actions"],[4,"ngIf"],["mat-stroked-button","","color","primary",3,"matMenuTriggerFor"],[1,"mdi","mdi-arrow-split-vertical"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"mdi","mdi-check"],[1,"mdi","mdi-close"],[1,"mdi","mdi-arrow-left"],[1,"mdi","mdi-truck"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(u.YNc(0,q,1,0,"mat-progress-bar",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1",3),u._uU(4,"Pedidos"),u.qZA(),u.qZA(),u.TgZ(5,"table",4),u.ynx(6,5),u.YNc(7,T,2,0,"th",6),u.YNc(8,w,2,1,"td",7),u.BQk(),u.ynx(9,8),u.YNc(10,C,2,0,"th",9),u.YNc(11,U,3,4,"td",7),u.BQk(),u.ynx(12,10),u.YNc(13,N,2,0,"th",9),u.YNc(14,v,2,1,"td",7),u.BQk(),u.ynx(15,11),u.YNc(16,Y,2,0,"th",9),u.YNc(17,k,2,1,"td",7),u.BQk(),u.ynx(18,12),u.YNc(19,J,2,0,"th",9),u.YNc(20,Q,2,1,"td",7),u.BQk(),u.ynx(21,13),u.YNc(22,D,2,0,"th",9),u.YNc(23,I,3,3,"td",7),u.BQk(),u.ynx(24,14),u.YNc(25,O,2,0,"th",15),u.YNc(26,L,2,1,"td",7),u.BQk(),u.YNc(27,E,1,0,"tr",16),u.YNc(28,W,1,0,"tr",17),u.qZA(),u.TgZ(29,"mat-paginator",18),u.NdJ("page",function(t){return e.pageChange(t)}),u.qZA(),u.qZA()),2&t&&(u.Q6J("ngIf",e.loading>0),u.xp6(5),u.Q6J("dataSource",e.dataSource),u.xp6(22),u.Q6J("matHeaderRowDef",e.displayedColumns),u.xp6(1),u.Q6J("matRowDefColumns",e.displayedColumns),u.xp6(1),u.Q6J("pageIndex",e.page)("length",e.total))},directives:[a.O5,s.xw,s.Wh,Z.BZ,s.yH,h.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,x.NW,_.pW,Z.ge,Z.ev,a.sg,c.lW,A.p6,A.yF,A.OP,Z.XQ,Z.Gk],pipes:[y.d],styles:[""]}),t})()}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.Bz.forChild(z)],i.Bz]}),t})();var P=n(5001),R=n(1050),X=n(7806),G=n(7439),K=n(3691),V=n(7521),tt=n(5250),et=n(5109),nt=n(1522),at=n(4786),it=n(7898),ot=n(689),ut=n(3920),st=n(6828),ct=n(84),lt=n(5619),rt=n(1575);let dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.ez,j,s.ae,P.To,R.g,_.Cv,X.Cq,G.QW,c.ot,d.UX,r.c,K.Ps,V.rP,tt.ie,et.Nh,nt.Ng,at.LD,Z.p0,h.JX,it.f,ot.w,x.TU,ut.yI,st.AV,ct.Bb,lt.Co,rt.n,d.u5,o.Is,A.Tx]]}),t})()}}]);