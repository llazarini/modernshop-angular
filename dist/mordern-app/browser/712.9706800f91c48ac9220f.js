(self.webpackChunkmodernshop_app=self.webpackChunkmodernshop_app||[]).push([[712],{7809:(t,e,i)=>{"use strict";i.d(e,{v:()=>o});class o{static generate(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}},4912:(t,e,i)=>{"use strict";i.d(e,{r:()=>o});let o=(()=>{class t{}return t.product="App\\Models\\Product",t.category="App\\Models\\Category",t.option="App\\Models\\Option",t})()},6712:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ProductsModule:()=>gt});var o=i(1511),n=i(3548),r=i(1572),a=i(9063),s=i(529);let l=(()=>{class t{constructor(t){this.httpClient=t}carousel(t){let e=new a.LE;return e=e.append("slug",t),this.httpClient.get(s.N.baseAuthUrl+"/products/slug",{params:e})}getAll(t){let e=new a.LE;return t&&(e=e.append("page",t.toString())),this.httpClient.get(s.N.baseAuthUrl+"/products/get-all",{params:e})}update(t){return this.httpClient.put(s.N.baseAuthUrl+"/products/update/"+t.id,t)}store(t){return this.httpClient.post(s.N.baseAuthUrl+"/products/store",t)}dataprovider(){return this.httpClient.get(s.N.baseAuthUrl+"/products/dataprovider/",{})}get(t){return this.httpClient.get(s.N.baseAuthUrl+"/products/get/"+t,{})}delete(t){return this.httpClient.delete(s.N.baseAuthUrl+"/products/delete/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=i(8394),u=i(3722),c=i(5980),p=i(7033),m=i(8623),g=i(3005),h=i(5994);function f(t,e){1&t&&r._UZ(0,"mat-progress-bar",20)}function Z(t,e){1&t&&(r.TgZ(0,"th",21),r._uU(1,"#"),r.qZA())}function A(t,e){if(1&t&&(r.TgZ(0,"td",22),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t.id)}}function b(t,e){1&t&&(r.TgZ(0,"th",23),r._uU(1,"Nome"),r.qZA())}function v(t,e){if(1&t&&(r.TgZ(0,"td",22),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t.name)}}function q(t,e){1&t&&(r.TgZ(0,"th",23),r._uU(1,"C\xf3digo (SKU)"),r.qZA())}function _(t,e){if(1&t&&(r.TgZ(0,"td",22),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t.sku)}}function U(t,e){1&t&&(r.TgZ(0,"th",23),r._uU(1,"Pre\xe7o (R$)"),r.qZA())}function x(t,e){if(1&t&&(r.TgZ(0,"td",22),r._uU(1),r.ALo(2,"currency"),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(r.lcZ(2,1,t.price))}}function N(t,e){1&t&&(r.TgZ(0,"th",23),r._uU(1,"Pre\xe7o de Custo (R$)"),r.qZA())}function T(t,e){if(1&t&&(r.TgZ(0,"td",22),r._uU(1),r.ALo(2,"currency"),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(r.lcZ(2,1,t.price_cost))}}function y(t,e){1&t&&(r.TgZ(0,"th",24),r._uU(1,"A\xe7\xf5es"),r.qZA())}function C(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"td",22),r.TgZ(1,"button",25),r._UZ(2,"i",26),r._uU(3," Editar "),r.qZA(),r.TgZ(4,"button",27),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().deleteConfirm(e)}),r._UZ(5,"i",28),r._uU(6," Remover "),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(1),r.Q6J("routerLink","edit/"+t.id)}}function w(t,e){1&t&&r._UZ(0,"tr",29)}function k(t,e){1&t&&r._UZ(0,"tr",30)}let S=(()=>{class t{constructor(t,e){this.productService=t,this.alertService=e,this.displayedColumns=["id","name","sku","price","price_cost","actions"],this.loading=!0,this.page=0}ngOnInit(){this.getAll()}getAll(){this.loading=!0,this.productService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading=!1)}delete(t){this.loading=!0,this.productService.delete(t.id).subscribe(t=>{this.getAll(),this.alertService.toast(t.message)}).add(()=>this.loading=!1)}pageChange(t){this.page=t.pageIndex,this.getAll()}deleteConfirm(t){this.alertService.confirm("Deseja remover o registro?","Remover").subscribe(e=>{e&&this.delete(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(l),r.Y36(d.c))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-products"]],decls:30,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["color","primary","mat-flat-button","","routerLink","add"],[1,"mdi","mdi-plus"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","sku"],["matColumnDef","price"],["matColumnDef","price_cost"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"actions"],["mat-button","","color","primary",3,"routerLink"],[1,"mdi","mdi-pencil"],["mat-button","","color","warn",3,"click"],[1,"mdi","mdi-close"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(r.YNc(0,f,1,0,"mat-progress-bar",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h1",3),r._uU(4,"Produtos"),r.qZA(),r.TgZ(5,"button",4),r._UZ(6,"i",5),r._uU(7," Adicionar "),r.qZA(),r.qZA(),r.TgZ(8,"table",6),r.ynx(9,7),r.YNc(10,Z,2,0,"th",8),r.YNc(11,A,2,1,"td",9),r.BQk(),r.ynx(12,10),r.YNc(13,b,2,0,"th",11),r.YNc(14,v,2,1,"td",9),r.BQk(),r.ynx(15,12),r.YNc(16,q,2,0,"th",11),r.YNc(17,_,2,1,"td",9),r.BQk(),r.ynx(18,13),r.YNc(19,U,2,0,"th",11),r.YNc(20,x,3,3,"td",9),r.BQk(),r.ynx(21,14),r.YNc(22,N,2,0,"th",11),r.YNc(23,T,3,3,"td",9),r.BQk(),r.ynx(24,15),r.YNc(25,y,2,0,"th",16),r.YNc(26,C,7,1,"td",9),r.BQk(),r.YNc(27,w,1,0,"tr",17),r.YNc(28,k,1,0,"tr",18),r.qZA(),r.TgZ(29,"mat-paginator",19),r.NdJ("page",function(t){return e.pageChange(t)}),r.qZA(),r.qZA()),2&t&&(r.Q6J("ngIf",e.loading),r.xp6(8),r.Q6J("dataSource",e.dataSource),r.xp6(19),r.Q6J("matHeaderRowDef",e.displayedColumns),r.xp6(1),r.Q6J("matRowDefColumns",e.displayedColumns),r.xp6(1),r.Q6J("pageIndex",e.page)("length",e.total))},directives:[o.O5,u.xw,u.Wh,c.lW,n.rH,p.BZ,u.yH,m.YE,p.w1,p.fO,p.Dz,p.as,p.nj,g.NW,h.pW,p.ge,p.ev,p.XQ,p.Gk],pipes:[o.H9],styles:[""]}),t})();var I=i(6073),Y=i(7809),J=i(4912),D=i(5109),Q=i(6283),L=i(6756),O=i(388),M=i(4946),P=i(5250);function F(t,e){1&t&&r._UZ(0,"mat-progress-bar",25)}function $(t,e){1&t&&(r._UZ(0,"i",26),r._uU(1,"Dados B\xe1sicos "))}function B(t,e){1&t&&(r._UZ(0,"i",27),r._uU(1," Imagens "))}function E(t,e){1&t&&(r._UZ(0,"i",28),r._uU(1," Meta tags "))}function H(t,e){1&t&&(r._UZ(0,"i",29),r._uU(1," Op\xe7\xf5es "))}function R(t,e){if(1&t&&(r.TgZ(0,"mat-list-option",30),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",t.id),r.xp6(1),r.hij(" ",t.name," ")}}function G(t,e){1&t&&(r._UZ(0,"i",29),r._uU(1," Categorias "))}function W(t,e){if(1&t&&(r.TgZ(0,"mat-list-option",30),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",t.id),r.xp6(1),r.hij(" ",t.name," ")}}const j=function(){return{prefix:"R$ ",thousands:".",decimal:","}};let z=(()=>{class t{constructor(t,e,i,o){this.router=t,this.activatedRoute=e,this.alertService=i,this.productService=o,this.loading=0,this.id=null,this.fileType=J.r.product,this.token=Y.v.generate(),this.categories=[],this.options=[],this.formGroup=new I.cw({request_token:new I.NI([this.token]),id:new I.NI([null]),sku:new I.NI([null]),name:new I.NI([null,[I.kI.required,I.kI.maxLength(255)]]),description:new I.NI([null]),price:new I.NI([null]),price_cost:new I.NI([null]),meta_name:new I.NI([null]),meta_description:new I.NI([null]),meta_keys:new I.NI([null]),categories:new I.NI([]),options:new I.NI([])})}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.dataprovider(),this.id&&this.get()}dataprovider(){this.loading+=1,this.productService.dataprovider().subscribe(t=>{this.categories=t.categories,this.options=t.options}).add(()=>this.loading-=1)}submit(){this.loading||(this.id?this.update():this.store())}store(){this.loading+=1,this.productService.store(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","products"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading-=1)}update(){this.loading+=1,this.productService.update(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","products"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading-=1)}get(){this.loading+=1,this.productService.get(this.id).subscribe(t=>{var e,i;const o=t;o.options=null===(e=t.options)||void 0===e?void 0:e.map(t=>t.id),o.categories=null===(i=t.categories)||void 0===i?void 0:i.map(t=>t.id),this.formGroup.patchValue(o)}).add(()=>this.loading-=1)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(n.F0),r.Y36(n.gz),r.Y36(d.c),r.Y36(l))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-add-edit"]],decls:66,vars:14,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start"],["color","primary","mat-flat-button","",3,"click"],[1,"mdi","mdi-plus"],[1,"common-form",3,"formGroup","submit"],[1,"vertical"],["mat-tab-label",""],["fxLayout","column",1,"common-form-max"],["appearance","outline"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","sku"],["matInput","","required","","formControlName","description"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap.gt-xs","15px"],["fxFlex","","appearance","outline"],["currencyMask","","matInput","","required","","formControlName","price_cost",3,"options"],["currencyMask","","matInput","","required","","formControlName","price",3,"options"],["fxLayout","row",1,"common-form-max"],[3,"multiple","type","id","token"],["matInput","","required","","formControlName","meta_name"],["matInput","","required","","formControlName","meta_description"],["matInput","","required","","formControlName","meta_keys"],[1,"common-form-max"],["formControlName","options"],[3,"value",4,"ngFor","ngForOf"],["formControlName","categories"],["mode","indeterminate",1,"progress"],[1,"mdi","mdi-pencil","margin-right"],[1,"mdi","mdi-image","margin-right"],[1,"mdi","mdi-text","margin-right"],[1,"mdi","mdi-chart-bar","margin-right"],[3,"value"]],template:function(t,e){1&t&&(r.YNc(0,F,1,0,"mat-progress-bar",0),r.TgZ(1,"div",1),r.TgZ(2,"h1"),r._uU(3),r.qZA(),r.TgZ(4,"button",2),r.NdJ("click",function(){return e.submit()}),r._UZ(5,"i",3),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"form",4),r.NdJ("submit",function(){return e.submit()}),r.TgZ(8,"mat-tab-group",5),r.TgZ(9,"mat-tab"),r.YNc(10,$,2,0,"ng-template",6),r.TgZ(11,"div",7),r.TgZ(12,"mat-form-field",8),r.TgZ(13,"mat-label"),r._uU(14,"Nome do Produto"),r.qZA(),r._UZ(15,"input",9),r.qZA(),r.TgZ(16,"mat-form-field",8),r.TgZ(17,"mat-label"),r._uU(18,"C\xf3digo do Produto (SKU)"),r.qZA(),r._UZ(19,"input",10),r.qZA(),r.TgZ(20,"mat-form-field",8),r.TgZ(21,"mat-label"),r._uU(22,"Descri\xe7\xe3o do Produto"),r.qZA(),r._UZ(23,"textarea",11),r.qZA(),r.TgZ(24,"div",12),r.TgZ(25,"mat-form-field",13),r.TgZ(26,"mat-label"),r._uU(27,"Pre\xe7o de Custo"),r.qZA(),r._UZ(28,"input",14),r.qZA(),r.TgZ(29,"mat-form-field",13),r.TgZ(30,"mat-label"),r._uU(31,"Pre\xe7o de Venda"),r.qZA(),r._UZ(32,"input",15),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"mat-tab"),r.YNc(34,B,2,0,"ng-template",6),r.TgZ(35,"div",16),r._UZ(36,"app-file-upload",17),r.qZA(),r.qZA(),r.TgZ(37,"mat-tab"),r.YNc(38,E,2,0,"ng-template",6),r.TgZ(39,"div",7),r.TgZ(40,"mat-form-field",8),r.TgZ(41,"mat-label"),r._uU(42,"Meta Nome"),r.qZA(),r._UZ(43,"input",18),r.qZA(),r.TgZ(44,"mat-form-field",8),r.TgZ(45,"mat-label"),r._uU(46,"Meta Descri\xe7\xe3o"),r.qZA(),r._UZ(47,"textarea",19),r.qZA(),r.TgZ(48,"mat-form-field",8),r.TgZ(49,"mat-label"),r._uU(50,"Meta Keys"),r.qZA(),r._UZ(51,"textarea",20),r.qZA(),r.qZA(),r.qZA(),r.TgZ(52,"mat-tab"),r.YNc(53,H,2,0,"ng-template",6),r.TgZ(54,"div",21),r.TgZ(55,"h3"),r._uU(56,"Op\xe7\xf5es Dispon\xedveis"),r.qZA(),r.TgZ(57,"mat-selection-list",22),r.YNc(58,R,2,2,"mat-list-option",23),r.qZA(),r.qZA(),r.qZA(),r.TgZ(59,"mat-tab"),r.YNc(60,G,2,0,"ng-template",6),r.TgZ(61,"div",21),r.TgZ(62,"h3"),r._uU(63,"Categorias Dispon\xedveis"),r.qZA(),r.TgZ(64,"mat-selection-list",24),r.YNc(65,W,2,2,"mat-list-option",23),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.Q6J("ngIf",e.loading>0),r.xp6(3),r.hij("",e.id?"Editar":"Adicionar"," Produto"),r.xp6(3),r.hij(" ",e.id?"Salvar edi\xe7\xe3o":"Adicionar"," "),r.xp6(1),r.Q6J("formGroup",e.formGroup),r.xp6(21),r.Q6J("options",r.DdM(12,j)),r.xp6(4),r.Q6J("options",r.DdM(13,j)),r.xp6(4),r.Q6J("multiple",!0)("type",e.fileType)("id",e.id)("token",e.token),r.xp6(22),r.Q6J("ngForOf",e.options),r.xp6(7),r.Q6J("ngForOf",e.categories))},directives:[o.O5,u.xw,u.Wh,c.lW,I._Y,I.JL,I.sg,D.SP,D.uX,D.uD,Q.KE,Q.hX,L.Nt,I.Fj,I.Q7,I.JJ,I.u,u.SQ,u.yH,O.g1,M.Y,P.Ub,o.sg,h.pW,P.vS],styles:[".list[_ngcontent-%COMP%]{min-width:220px}"]}),t})();const X=[{path:"",component:S},{path:"add",component:z},{path:"edit/:id",component:z}];let K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.Bz.forChild(X)],n.Bz]}),t})();var V=i(377),tt=i(5001),et=i(1050),it=i(7806),ot=i(7439),nt=i(3691),rt=i(7521),at=i(1522),st=i(4786),lt=i(7898),dt=i(689),ut=i(3920),ct=i(6828),pt=i(84),mt=i(5619);let gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,K,u.ae,tt.To,et.g,h.Cv,it.Cq,ot.QW,c.ot,I.UX,L.c,nt.Ps,rt.rP,P.ie,D.Nh,at.Ng,st.LD,p.p0,m.JX,lt.f,dt.w,g.TU,ut.yI,ct.AV,pt.Bb,mt.Co,I.u5,V.aT,O.Ud]]}),t})()},4946:(t,e,i)=>{"use strict";i.d(e,{Y:()=>m});var o=i(1572),n=i(9063),r=i(529);let a=(()=>{class t{constructor(t){this.httpClient=t}store(t,e,i,o){const a=new FormData,s=new n.WM;return s.append("Content-Type","multipart/form-data"),i?a.append("type_id",i.toString()):a.append("request_token",o.toString()),a.append("type",e),a.append("file",t),this.httpClient.post(r.N.baseAuthUrl+"/files/store",a,{headers:s})}delete(t){return this.httpClient.delete(r.N.baseAuthUrl+"/files/delete/"+t,{})}images(t,e){let i=new n.LE;return i=i.append("type",t),i=i.append("id",e.toString()),this.httpClient.get(r.N.baseAuthUrl+"/files/images/",{params:i})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(n.eN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=i(3722),l=i(5980),d=i(1511),u=i(7806);function c(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",10),o.TgZ(2,"button",11),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw().delete(e)}),o._UZ(3,"i",12),o.qZA(),o.qZA(),o.BQk()}if(2&t){const t=e.$implicit;o.xp6(1),o.Udp("background","url("+t.url+")")}}function p(t,e){1&t&&o._UZ(0,"mat-spinner",13)}let m=(()=>{class t{constructor(t){this.fileService=t,this.loading=0,this.files=[],this.uploaded=new o.vpe}set id(t){t&&(this.typeId=t,this.images())}get id(){return this.typeId}ngOnInit(){}changed(t){if(this.loading>0)return;const e=t.target.files.item(0);this.loading+=1,this.fileService.store(e,this.type,this.id,this.token).subscribe(t=>{!this.multiple&&this.files.length&&(this.delete(this.files[0]),this.files=[]),this.files.push(t),this.uploaded.emit(t)}).add(()=>this.loading-=1)}images(){this.loading+=1,this.fileService.images(this.type,this.id).subscribe(t=>{this.files=t.data}).add(()=>this.loading-=1)}delete(t){this.loading+=1,this.fileService.delete(t.id).subscribe(e=>{const i=this.files.findIndex(e=>e.id===t.id);i<0||this.files.splice(i,1)}).add(()=>this.loading-=1)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-file-upload"]],inputs:{type:"type",multiple:"multiple",token:"token",id:"id"},outputs:{uploaded:"uploaded"},decls:11,vars:3,consts:[["fxLayout","column"],["type","file",1,"file-input",3,"multiple","change"],["fileUpload",""],["fxLayout","row","fxLayoutAlign","start center",1,"file-upload","margin-bottom",3,"click"],["mat-mini-fab","","color","primary","type","button",1,"upload-btn"],[1,"mdi","mdi-upload"],[1,"margin-left","pointer"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"images","margin-top"],[4,"ngFor","ngForOf"],["mode","indeterminate",4,"ngIf"],[1,"image","margin-right","margin-bottom"],["mat-icon-button","","color","warn","type","button",3,"click"],[1,"mdi","mdi-close"],["mode","indeterminate"]],template:function(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"input",1,2),o.NdJ("change",function(t){return e.changed(t)}),o.qZA(),o.TgZ(3,"div",3),o.NdJ("click",function(){return o.CHM(t),o.MAs(2).click()}),o.TgZ(4,"button",4),o._UZ(5,"i",5),o.qZA(),o.TgZ(6,"div",6),o._uU(7,"Selecione o arquivo"),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.YNc(9,c,4,2,"ng-container",8),o.YNc(10,p,1,0,"mat-spinner",9),o.qZA(),o.qZA()}2&t&&(o.xp6(1),o.Q6J("multiple",e.multiple),o.xp6(8),o.Q6J("ngForOf",e.files),o.xp6(1),o.Q6J("ngIf",e.loading>0))},directives:[s.xw,s.Wh,l.lW,d.sg,d.O5,u.$g],styles:[".file-input[_ngcontent-%COMP%]{display:none}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:10px;border:3px solid #bebebe;background-size:cover!important}"]}),t})()}}]);