(self.webpackChunkmodernshop_app=self.webpackChunkmodernshop_app||[]).push([[198],{5198:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BannersModule:()=>nt});var i=n(1511),r=n(3548),a=n(1572),o=n(9063),s=n(529);let l=(()=>{class t{constructor(t){this.httpClient=t}getAll(t){let e=new o.LE;return t&&(e=e.append("page",t.toString())),this.httpClient.get(s.N.baseAuthUrl+"/banners/get-all",{params:e})}update(t){return this.httpClient.put(s.N.baseAuthUrl+"/banners/update/"+t.id,t)}store(t){return this.httpClient.post(s.N.baseAuthUrl+"/banners/store",t)}dataprovider(){return this.httpClient.get(s.N.baseAuthUrl+"/banners/dataprovider/",{})}get(t){return this.httpClient.get(s.N.baseAuthUrl+"/banners/get/"+t,{})}delete(t){return this.httpClient.delete(s.N.baseAuthUrl+"/banners/delete/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(o.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n(8394),u=n(3722),c=n(5980),m=n(7033),p=n(8623),h=n(3005),g=n(5994),f=n(3691);function Z(t,e){1&t&&a._UZ(0,"mat-progress-bar",18)}function b(t,e){1&t&&(a.TgZ(0,"th",19),a._uU(1,"#"),a.qZA())}function v(t,e){if(1&t&&(a.TgZ(0,"td",20),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t.id)}}function A(t,e){1&t&&(a.TgZ(0,"th",21),a._uU(1,"Nome"),a.qZA())}function q(t,e){if(1&t&&(a.TgZ(0,"td",20),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t.name)}}function x(t,e){1&t&&(a.TgZ(0,"th",21),a._uU(1,"Slug"),a.qZA())}function U(t,e){if(1&t&&(a.TgZ(0,"td",20),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t.slug)}}function _(t,e){1&t&&(a.TgZ(0,"th",22),a._uU(1,"A\xe7\xf5es"),a.qZA())}function C(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",20),a.TgZ(1,"button",23),a.TgZ(2,"mat-icon",24),a._uU(3,"edit"),a.qZA(),a._uU(4," Editar "),a.qZA(),a.TgZ(5,"button",25),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().deleteConfirm(e)}),a.TgZ(6,"mat-icon",24),a._uU(7,"remove_circle_outline"),a.qZA(),a._uU(8," Remover "),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.Q6J("routerLink","edit/"+t.id)}}function T(t,e){1&t&&a._UZ(0,"tr",26)}function N(t,e){1&t&&a._UZ(0,"tr",27)}let k=(()=>{class t{constructor(t,e){this.bannerService=t,this.alertService=e,this.displayedColumns=["id","name","actions"],this.loading=!0,this.page=0}ngOnInit(){this.getAll()}getAll(){this.loading=!0,this.bannerService.getAll(this.page+1).subscribe(t=>{this.dataSource=t.data,this.total=t.total}).add(()=>this.loading=!1)}delete(t){this.loading=!0,this.bannerService.delete(t.id).subscribe(t=>{this.getAll(),this.alertService.toast(t.message)}).add(()=>this.loading=!1)}pageChange(t){this.page=t.pageIndex,this.getAll()}deleteConfirm(t){this.alertService.confirm("Deseja remover o registro?","Remover").subscribe(e=>{e&&this.delete(t)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(l),a.Y36(d.c))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-banners"]],decls:24,vars:6,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","column"],["fxLayoutAlign","space-between center"],[1,"margin-right"],["color","primary","mat-flat-button","","routerLink","add"],[1,"mdi","mdi-plus"],["fxFlex","","mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","width","50px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","sku"],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","","class","actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10",3,"pageIndex","length","page"],["mode","indeterminate",1,"progress"],["mat-header-cell","","width","50px"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"actions"],["mat-button","","color","primary",3,"routerLink"],["inline","",1,"small"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.YNc(0,Z,1,0,"mat-progress-bar",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"h1",3),a._uU(4,"Banners"),a.qZA(),a.TgZ(5,"button",4),a._UZ(6,"i",5),a._uU(7," Adicionar "),a.qZA(),a.qZA(),a.TgZ(8,"table",6),a.ynx(9,7),a.YNc(10,b,2,0,"th",8),a.YNc(11,v,2,1,"td",9),a.BQk(),a.ynx(12,10),a.YNc(13,A,2,0,"th",11),a.YNc(14,q,2,1,"td",9),a.BQk(),a.ynx(15,12),a.YNc(16,x,2,0,"th",11),a.YNc(17,U,2,1,"td",9),a.BQk(),a.ynx(18,13),a.YNc(19,_,2,0,"th",14),a.YNc(20,C,9,1,"td",9),a.BQk(),a.YNc(21,T,1,0,"tr",15),a.YNc(22,N,1,0,"tr",16),a.qZA(),a.TgZ(23,"mat-paginator",17),a.NdJ("page",function(t){return e.pageChange(t)}),a.qZA(),a.qZA()),2&t&&(a.Q6J("ngIf",e.loading),a.xp6(8),a.Q6J("dataSource",e.dataSource),a.xp6(13),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("pageIndex",e.page)("length",e.total))},directives:[i.O5,u.xw,u.Wh,c.lW,r.rH,m.BZ,u.yH,p.YE,m.w1,m.fO,m.Dz,m.as,m.nj,h.NW,g.pW,m.ge,m.ev,f.Hw,m.XQ,m.Gk],styles:[""]}),t})();var w=n(6073),y=n(7809),S=n(6283),B=n(6756),J=n(4946),Y=n(7679);function D(t,e){1&t&&a._UZ(0,"mat-progress-bar",12)}function I(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",13),a.TgZ(1,"mat-form-field",6),a.TgZ(2,"mat-label"),a._uU(3,"Nome"),a.qZA(),a._UZ(4,"input",7),a.qZA(),a.TgZ(5,"mat-form-field",6),a.TgZ(6,"mat-label"),a._uU(7,"Conte\xfado"),a.qZA(),a._UZ(8,"textarea",14),a.qZA(),a.TgZ(9,"app-file-upload",15),a.NdJ("uploaded",function(e){const n=a.CHM(t).index;return a.oxw().fileUploaded(n,e)}),a.qZA(),a.TgZ(10,"button",16),a.NdJ("click",function(){const e=a.CHM(t).index;return a.oxw().removeBanner(e)}),a._UZ(11,"i",17),a._uU(12," Remover banner"),a.qZA(),a._UZ(13,"mat-divider"),a.qZA()}if(2&t){const t=e.$implicit,n=e.index,i=a.oxw();a.Q6J("formGroup",i.banners.controls[n]),a.xp6(9),a.Q6J("id",t.value.id)("token",i.token)("multiple",!1)}}let Q=(()=>{class t{constructor(t=null,e,n,i,r){this.formBuilder=t,this.router=e,this.activatedRoute=n,this.alertService=i,this.bannerService=r,this.id=null,this.token=y.v.generate(),this.formGroup=this.formBuilder.group({request_token:[this.token],id:[null],name:[null,[w.kI.required,w.kI.maxLength(255)]],slug:[null],banners:this.formBuilder.array([])})}get banners(){return this.formGroup.get("banners")}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.id&&this.get()}submit(){this.loading||(this.id?this.update():this.store())}store(){this.loading=!0,this.bannerService.store(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}update(){this.loading=!0,this.bannerService.update(this.formGroup.value).subscribe(t=>{this.router.navigate(["/","auth","banners"]),this.alertService.toast(t.message)},t=>{this.alertService.treatError(t)}).add(()=>this.loading=!1)}get(){this.loading=!0,this.bannerService.get(this.id).subscribe(t=>{this.formGroup.patchValue(t),t.banners.forEach(t=>this.addBanner(t))}).add(()=>this.loading=!1)}addBanner(t){var e;this.banners.push(this.formBuilder.group({id:[null==t?void 0:t.id],file_id:[null===(e=null==t?void 0:t.file)||void 0===e?void 0:e.id],name:[null==t?void 0:t.name,[w.kI.required,w.kI.maxLength(255)]],content:[null==t?void 0:t.content]}))}fileUploaded(t,e){this.banners.at(t).patchValue({file_id:e.id})}removeBanner(t){this.banners.removeAt(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(w.qu),a.Y36(r.F0),a.Y36(r.gz),a.Y36(d.c),a.Y36(l))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-add-edit"]],decls:21,vars:5,consts:[["class","progress","mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start"],["color","primary","mat-flat-button","",3,"click"],[1,"mdi","mdi-plus"],[1,"common-form","padding",3,"formGroup","submit"],["fxLayout","column",1,"common-form-max"],["appearance","outline"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","slug"],["mat-button","","type","button",3,"click"],["fxFlex",""],["class","padding","fxLayout","column",3,"formGroup",4,"ngFor","ngForOf"],["mode","indeterminate",1,"progress"],["fxLayout","column",1,"padding",3,"formGroup"],["matInput","","required","","formControlName","content"],["type","App\\Models\\Banner",3,"id","token","multiple","uploaded"],["mat-icon-button","","type","button",3,"click"],[1,"mdi","mdi-trash-can"]],template:function(t,e){1&t&&(a.YNc(0,D,1,0,"mat-progress-bar",0),a.TgZ(1,"div",1),a.TgZ(2,"h1"),a._uU(3),a.qZA(),a.TgZ(4,"button",2),a.NdJ("click",function(){return e.submit()}),a._UZ(5,"i",3),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"form",4),a.NdJ("submit",function(){return e.submit()}),a.TgZ(8,"div",5),a.TgZ(9,"mat-form-field",6),a.TgZ(10,"mat-label"),a._uU(11,"Nome do Banner"),a.qZA(),a._UZ(12,"input",7),a.qZA(),a.TgZ(13,"mat-form-field",6),a.TgZ(14,"mat-label"),a._uU(15,"Slug (inser\xe7\xe3o no c\xf3digo)"),a.qZA(),a._UZ(16,"input",8),a.qZA(),a.TgZ(17,"button",9),a.NdJ("click",function(){return e.addBanner()}),a._uU(18,"Adicionar Banner"),a.qZA(),a.TgZ(19,"div",10),a.YNc(20,I,14,4,"div",11),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.Q6J("ngIf",e.loading),a.xp6(3),a.hij("",e.id?"Editar":"Adicionar"," Banner"),a.xp6(3),a.hij(" ",e.id?"Salvar edi\xe7\xe3o":"Adicionar"," "),a.xp6(1),a.Q6J("formGroup",e.formGroup),a.xp6(13),a.Q6J("ngForOf",e.banners.controls))},directives:[i.O5,u.xw,u.Wh,c.lW,w._Y,w.JL,w.sg,S.KE,S.hX,B.Nt,w.Fj,w.Q7,w.JJ,w.u,u.yH,i.sg,g.pW,J.Y,Y.d],styles:[".list[_ngcontent-%COMP%]{min-width:220px}"]}),t})();const L=[{path:"",component:k},{path:"add",component:Q},{path:"edit/:id",component:Q}];let G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.Bz.forChild(L)],r.Bz]}),t})();var H=n(5001),E=n(1050),O=n(7806),F=n(7439),R=n(7521),W=n(5250),j=n(5109),z=n(1522),M=n(4786),X=n(7898),$=n(689),P=n(6749),V=n(6828),K=n(84),tt=n(5619),et=n(6712);let nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.ez,G,u.ae,H.To,E.g,g.Cv,O.Cq,F.QW,c.ot,w.UX,B.c,f.Ps,R.rP,W.ie,j.Nh,z.Ng,M.LD,m.p0,p.JX,X.f,$.w,h.TU,P.yI,V.AV,K.Bb,tt.Co,et.ProductsModule,w.u5]]}),t})()}}]);