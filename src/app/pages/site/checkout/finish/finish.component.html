<mat-progress-bar *ngIf="loading > 0" class="progress" mode="indeterminate"></mat-progress-bar>
<div class="container inner-page" fxLayout="column" fxLayout.gt-sm="row">
    <div fxFlex class="margin-right">
        <h1>Pague com cartão de crédito</h1>

        <div class="card">
            <div class="number"></div>
        </div>

        <form [formGroup]="formGroup" fxLayout="column" (submit)="submit()">
            <mat-form-field  appearance="outline">
                <mat-label>Número do Cartão</mat-label>
                <input matInput mask="0000 0000 0000 0000" required formControlName="cardNumber"/>
            </mat-form-field>
            <mat-form-field  appearance="outline" class="margin-right">
                <mat-label>Nome no Cartão</mat-label>
                <input matInput required formControlName="name"/>
            </mat-form-field>
            <div fxLayout="row">
                <mat-form-field  appearance="outline" class="margin-right">
                    <mat-label>Expira em</mat-label>
                    <input matInput mask="00/00" formControlName="date"/>
                </mat-form-field>
                <mat-form-field fxFlex appearance="outline">
                    <mat-label>CVC</mat-label>
                    <input matInput mask="0000" formControlName="cvc"/>
                </mat-form-field>
            </div>
            <button mat-flat-button color="primary" type="submit">Continuar</button>
        </form>
    </div>
    <div fxFlex.gt-sm="500px">
        <h1>Finalizar Compra</h1>
        <div *ngFor="let product of products; let i = index" class="col-md-5">
            <div fxFlex="200px">{{ product.name }}</div>
            <div fxFlex="100px">{{ product.price | currency:'R$' }}</div>
            <div fxFlex="60px">
                <mat-form-field appearance="outline" class="no-padding no-margin" fxFlex="60px">
                    <input type="number" matInput [(ngModel)]="product.quantity" (change)="change()"/>
                </mat-form-field>
            </div>
            <div fxFlex="100px">{{ product.total_price | currency:'R$' }}</div>
            <div>
                <button mat-icon-button color="warn" (click)="remove(i)">
                    <i class="mdi mdi-trash-can"></i>
                </button>
            </div>
        </div>
        <div fxLayoutAlign="end center">
            <div class="margin-right">Subtotal</div>
            <div>{{ subTotal | currency: 'R$' }}</div>
        </div>
        <div fxLayoutAlign="end center">
            <div class="margin-right">Calcule o frete</div>
            <mat-form-field appearance="outline">
                <input matInput [(ngModel)]="cep" (change)="shipping()"/>
            </mat-form-field>
        </div>
        <div fxLayoutAlign="end center">
            <div class="margin-right">Total</div>
            <div>{{ total | currency: 'R$' }}</div>
        </div>
    </div>
</div>