<mat-progress-bar *ngIf="loading > 0" class="progress" mode="indeterminate"></mat-progress-bar>
<div class="container inner-page" fxLayout="column" fxLayout.gt-sm="row">
    <div fxFlex class="margin-right">
        <h1>Informe seu e-mail</h1>
        <h2>
            O seu e-mail será usado para lhe enviar atualizações de status do pedido.
        </h2>
        <form [formGroup]="formGroup" fxLayout="column" (submit)="submit()">
            <mat-form-field fxFlex appearance="outline" class="margin-right">
                <mat-label>E-mail</mat-label>
                <input matInput required formControlName="email"/>
            </mat-form-field>
            <div>
                <button mat-flat-button color="primary" type="submit">Continuar para Pagamento</button>
            </div>
        </form>
    </div>
    <div fxFlex.gt-sm="500px">
        <h1>Finalizar Compra</h1>
        <div *ngFor="let product of products; let i = index" class="col-md-5">
            <div fxFlex="200px">{{ product.name }}</div>
            <div fxFlex="100px">{{ product.price | currency:'R$' }}</div>
            <div fxFlex="60px">
                <mat-form-field appearance="outline" class="no-padding no-margin" fxFlex="60px">
                    <input type="number" matInput [(ngModel)]="product.quantity" (change)="change()"/>
                </mat-form-field>
            </div>
            <div fxFlex="100px">{{ product.total_price | currency:'R$' }}</div>
            <div>
                <button mat-icon-button color="warn" (click)="remove(i)">
                    <i class="mdi mdi-trash-can"></i>
                </button>
            </div>
        </div>
        <div fxLayoutAlign="end center">
            <div class="margin-right">Subtotal</div>
            <div>{{ subTotal | currency: 'R$' }}</div>
        </div>
        <div fxLayoutAlign="end center">
            <div class="margin-right">Calcule o frete</div>
            <mat-form-field appearance="outline">
                <input matInput [(ngModel)]="cep" (change)="shipping()"/>
            </mat-form-field>
        </div>
        <div fxLayoutAlign="end center">
            <div class="margin-right">Total</div>
            <div>{{ total | currency: 'R$' }}</div>
        </div>
    </div>
</div>